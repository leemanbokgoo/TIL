# Static

- staic 키워드를 사용한다는 것은 메모리에 한번 할당되어 프로그램이 종료될떄 해제되는 것을 의미

![image](https://github.com/user-attachments/assets/ed8cb27c-9df3-432b-b9ea-a52e6f325c1c)

- static 변수는 모든 클래스의 **모든 인스턴스에서 공유**되는 변수로 클래스의 인스턴스를 생성하지않고도 사용가능하다.
- 클래스이름.변수이름의 형태로 접근이 가능하며 static 변수는 프로그램이 시작될떄 초기화 된다.
- public 으로 선언되면 누구나 어디서든 접근 가능
- jvm은 실행과정에서 필요한 클래스의 정보를 메모리에 로딩한다. 이 로딩 시점에서 staitc변수가 초기화 된다.
- static 메소드는 해당하는 객체를 생성하지않고도 해당 메소드를 호출하기 위한 것
- static 변수 정적 변수는 하나의 클래스에 하나만 존재한다.( 그 클래스의 모든 객체들에 의해 공유된다.)
- static 영역에 존재하는 메모리는 가비지 컬렉터의 관리 영역 밖에 존재함으로 static을 자주 사용하면 프로그램의 종료시까지 메모리가 할당된채로 존재. -> 자주 사용하면 시스템의 퍼포먼스에 악영향을 줌.
- 자바에서 static 키워드는 클래스 레벨의 변수나 메소드,블록을 정의할때 사용한다. 이는 인스턴스 생성 없이도 접근 가능하며 모든 인스턴스에서 공유된다. static 변수는 프로그램이 시작 할떄 메모리에 할당되고 프로그램이 종료될때까지 유지된다.
- 왜냐면 static 멤버는 클래스가 로드 될때 메모리 메소드에 영역이 할당되기때문. 이는 모든 인스턴스가 공유하는 특성 때문에 유용하게 사용 될 수 있다. 예를 들어, 어떤 클래스의 인스턴스 들이 공통적으로 사용해야하는 값을 static 변수로 선언할 수 있다. 
- 하지만, static 키워드의 남용은 객체지향 프로그래밍의 원칙과 상반되며, 메모리 사용량 증가로 이어질 수 있습니다. 따라서 static 멤버의 사용은 신중하게 결정해야한다.왜냐하면 static 멤버는 프로그램 종료 시까지 메모리에 남아 있어, 과도한 static 사용은 메모리 누수의 원인이 될 수 있기 때문이다. 이는 특히 대규모 애플리케이션에서 성능 저하의 원인이 될 수 있다.

### static 변수 특징
- static 클래스 변수이다.
- 객체를 생성하지않고도 static 자원에 접근이 가능하다.
- static변수와 static 메소드는 static 메모리 영역에 존재함으로 객체가 생성되기 이전에 이미 할당되어있음 -> 객체 생성 없이 바로 접근 가능.
- 메모리에 고정적으로 할단된다 
- static 메서드 내에서는 인스턴스 변수를 사용할 수 없다. 

### static의 생명주기
- 클래스 변수인 Static 변수는 클래스가 생성될 때 메모리를 할당 받고 프로그램 종료 시점에 반환되므로 사용하지 않고 있어도 메모리가 할당되어 있음.
- static 변수가 있는 클래스를 로드 한 클래스 로더가 GC를 콜렉팅 할때 정적변수 역시 가비지 콜렉팅 된다 정적변수가 선언된 클래스가 로드된 상태에선 가비지 콜렉팅이 안되고 해당 클래스 로더가 가비지 콜렉팅 되면 사라진다고한다.
- 즉, 메모리에 고정적으로 할당되어 프로그램이 종료될떄 해체되는 변수이다. 


### static 변수의 이해와 사용
- static 변수는 클래스 레벨에서 선언되며, 모든 인스턴스에 의해 공유된다. 이는 특정 데이터를 모든 인스턴스가 공유해야 할 때 유용하다. 예를 들어, 회사의 직원 수를 추적하는 경우 static 변수를 사용할 수 있다.
= 왜냐하면 static 변수는 모든 인스턴스에서 동일한 값을 유지해야 할 때 효과적이기 때문이다. 이는 인스턴스마다 별도의 복사본을 유지할 필요가 없어 메모리 사용을 최적화할 수 있다.

## static 메소드의 활용
- static 메소드는 인스턴스 생성 없이 클래스 이름을 통해 직접 호출할 수 있다. 이는 유틸리티 함수나 상태가 필요 없는 연산에 주로 사용된다. 예를 들어, 수학 연산을 수행하는 메소드를 static으로 선언할 수 있다..
- 왜냐하면 static 메소드는 인스턴스의 상태에 의존하지 않는 연산을 수행할 때 유용하기 떄문이다. 이는 메소드 호출 시 인스턴스 생성의 오버헤드 없이 빠른 실행이 가능하다.
- 하지만, static 메소드는 클래스의 다른 static 메소드나 변수만 접근할 수 있으므로, 인스턴스 멤버에 접근해야 하는 경우에는 사용할 수 없다. 따라서 사용 시에는 이러한 제한을 고려해야 한다.
- 왜냐하면 static 메소드는 인스턴스의 상태를 직접 변경할 수 없어, 인스턴스 멤버와의 상호작용이 필요한 경우에는 적합하지 않기 때문이다. 이는 객체지향 프로그래밍의 원칙과도 일부 상반될 수 있다.
- 특히 static 메서드는 유틸리티성 메서드를 작성할 때 많이 사용된다. 예를 들어 ‘오늘의 날짜 구하기’, ‘숫자에 콤마 추가하기’ 등의 메서드를 작성할 때 스태틱 메서드를 사용하는 것이 유리하다.


## static 블록의 활용
- static 블록은 클래스가 처음 로드될 때 한 번만 실행되는 코드 블록으로 이는 주로 static 변수의 초기화에 사용된다. static 블록은 클래스가 메모리에 로드될 때 실행되므로, 복잡한 초기화 로직을 수행할 수 있다.
- 왜냐하면 static 블록은 클래스 로딩 시점에 단 한 번만 실행되기 때문에, 초기화 작업에 적합하다. 이는 프로그램 시작 시 필요한 리소스를 준비하는 데 유용할 수 있다.
- 하지만, static 블록 내에서 예외를 발생시킬 경우 프로그램의 실행에 영향을 줄 수 있으므로, 예외 처리에 주의해야 한다. 따라서 static 블록의 사용은 필요한 경우에만 제한적으로 이루어져야 한다.
- 왜냐하면 static 블록의 예외는 프로그램의 초기화 과정에 영향을 줄 수 있어, 프로그램의 안정성을 해칠 수 있기 때문이다. 이는 특히 복잡한 초기화 로직을 다룰 때 주의가 필요하다.


### 질문
#### 왜 static 변수와 static 메소드는 프로그램 종료 시까지 메모리에 남아 있어서 메모리 누수의 원인이 될 수 있나요?
- Static 변수와 메소드는 클래스 로더가 해당 클래스를 메모리에 로드할 때 함께 할당됩니다. 프로그램이 종료되거나 클래스 로더가 언로드되지 않는 한 메모리에 계속 유지되므로, 필요 이상으로 static 멤버를 남용하면 불필요한 메모리를 차지하게 됩니다. 특히 대규모 애플리케이션에서 이런 과도한 사용은 메모리 누수처럼 보일 수 있고 성능 저하로 이어질 수 있습니다.

#### static 메소드는 인스턴스 멤버를 사용할 수 없는 이유는 무엇인가요?
- Static 메소드는 클래스 수준에서 동작하며, 특정 인스턴스에 종속되지 않습니다. 따라서 static 메소드 내부에서는 클래스에 고정된 멤버(static 변수와 static 메소드)만 접근할 수 있습니다. 반면, 인스턴스 멤버는 특정 객체에 종속되기 때문에, static 메소드 실행 시 특정 인스턴스에 대한 정보를 알 수 없어 인스턴스 멤버에 접근할 수 없습니다. 이는 static 메소드의 설계 철학과 객체지향 원칙에 부합하는 제한입니다.

---


참고링크 

https://kim-daeyong.github.io/2019-07-09-static/
https://mangkyu.tistory.com/m/47

https://f-lab.kr/insight/understanding-and-using-java-static-keyword?gad_source=1&gclid=CjwKCAiAp4O8BhAkEiwAqv2UqLYevGT7b0TXCBvM7BleVeU45yKAhXuQIHKFxYIuoesJoD9VY4ONdhoCxj4QAvD_BwE