# 스레드 동기화를 이해하기위한 키워드 
## 동시성
![image](https://github.com/user-attachments/assets/607e1928-8c7e-4bb4-beb3-ad2fa6dfe043)
- 동시성이란 애플리케이션이 둘 이상의 작업을 동시에 진행중임을 의미. 보통 동시성을 설명할 떄 주로 CPU를 예로 들어 설명한다.
- 실제 우리의 컴퓨터는 사용자의 입장에서 멈춤 없이 동시에 여러 프로그램이 실행되는 것처럼 보이지만 내부의 CPU는 빠르게 여러 프로그램들을 돌아가며 테스크를 수행.
- 동시성이란 여러 작업을 동시에 실행하는 것을 의미하지만 반드시 동일한 시간에 실행 될 필요는 없음. 즉 CPU코어가 1개일 경우 한 작업을 먼저 실행하고 다음 작업을 실행하거나 한 작업과 다른 작업을 번갈아가며 실행하느 ㄴ등의 방식으로 실행됨.
- 이러한 현상은 우리의 애플리케이션 전반에서도 일어나는 일반적인 현상이 될 수 있음. 사용자가 CPU의 빠른 테스크 작업을 눈치채지 못하는 것처럼, 많은 사용자의 요청에 대해 우리의 Java 혹은 데이터베이스, 애플리케이션 또한 마찬가지로 많은 요청들이 동시에 발생한다는 착각을 할 수 있다.
- 이러한 동시성은 멀티 스레드 프로그래밍이 가능한 Java, 데이터베이스의 정합성, 혹은 선착순 예약시스템, 재고 시스템 등의 애플리케이션 서비스에서 고려해야할 대상

## 임계영역 (Critical section)
- 둘 이상의 스레드가 동시에 접근해서는 안되는 코드 영역을 뜻함. 다르게 표현하면 하나의 스레드만이 코드를 실행할 수 있는 영역

## 락 (Lock) 
- 자바에서 락은 특정 자원에 대한 접근을 제어하는 매커니즘. 락을 사용하면 동시에 하나의 스레드만 자원에 접근 할 수 있으며 이는 데이터의 일관성과 무결성을 보장
- **락은 임계영역을 포함하고 있는 객체에 접근 할 수 있는 권한을 의미**
- 락 없이 여러 스레드가 동시에 자원에 접근하게 되면 경쟁상태(Race Condition)이 발생하여 데이터가 손상 될 수 있음.
- 자바에서는 크게 객체락과 클래스락 두가지 유형의 락을 사용할 수 있다.
- 객체락은 특정 객체에 대한 접근을 제어하는데 사용 -> synchronized 키워드를 개게의 메서드나 블록에 적용하여 사용함.
- 클래스 락은 클래스의 static 메서드에 synchronized키워드를 적용하여 사용하며 클래스 레벨에서 동기화를 제공
- 락의 역사 
    - [Java 1.2]
        - Java 플랫폼은 1.2버전에서 java.util.concurrent 패키지를 도입했으며, 해당 패키지에는 고수준 동시성 추상화인 Lock 인터페이스와 이를 구현한 ReentrantLock 클래스 등의 몇 가지 새로운 동기화 기초를 도입.
    - [Java 5]
        - 이후 5버전에서 는 concurrent 프레임워크의 도입으로 동시성에 대한 주요 개선사항을 도입했습니다. java.util.concurrent.locks 패키지에는 ReadWriteLock, ReentrantReadWriteLock, Condition 등이 포함되었다.
        - 이들은 모두 개발자가 동기화된 메커니즘보다 더 세분화된 동시성 제어를 구현할 수 있도록 지원하는 전체 동시성 유틸리티 클래스 세트.
    - [Java 8]
        - 낙관적인 잠금 메커니즘을 제공하는 StampedLock 클래스가 추가되었다.

volatile
synchronized
Atomic variable (CAS)



## synchronized
- 스레드 동기화란 멀티스레드 환경에서 여러 스레드가 하나의 공유자원에 동시에 접근하지못하도록 막는 것을말함. 공유 데이터가 사용되어 동기화가 필요한 부분을 **임계영역**이라고 하고 자바에서는 이 임계영역에 synchronized키워드를 사용하여 여러 스레드가 동시에 접근하는 것을 금지함으로써 동기화 할수 있음.
- 자바에서는 synchronized 키워드를 사용해 특정 코드 블록이나 메서드에 락을 걸 수 있다. 이는 암묵적으로 모니터락을 획득하여 동기화를 구현하는 방식. 
-  자바에서는 Synchronized 키워드를 통해 데이터에 하나의 스레드만 접근이 가능하도록 만들어준다.
- 즉 synchronized는 락을 구현하고 관리하는 추상화 역할을 한다. 
- 자바에서 멀티스레드 환경에서 동시 접근에 대한 동기화를 제공하는 키워드
- 스레드가 임계 영역에 접근하게 되면, 해당 스레드는 Lock을 얻게 된다. 이후 해당 스레드가 Lock을 반납하기 이전에는 다른 스레드는 해당 임계 영역에 접근하지 못하게 된다.
sychronized는 메서드 전체를 임계 영역으로 설정하는 방법과 특정 코드 블록을 임계 영역으로 설정하는 방법이 있다.


## synchronized
- 동기화를 구현하는 가장 기본적인 방법은 synchronized 키워드를 사용한 것.
- synchronized 키워드는 메서드 전체 또는 특정 블록에 적용할 수 있다. 
- synchronized 키워드가 적용된 영역은 락을 획득한 스레드에 의해서만 접근 가능하며 이는 동시성 문제를 해결하는데 중요한 역할.
