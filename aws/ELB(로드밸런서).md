## ELB (Elastic Load Balancer)
- ELB(Elastic Load Balancer)란 애플리케이션 트래픽을 여러 대상에 자동으로 분산시켜 안정적인 AWS서버 환경을 운용하는데에 도움을 주는 서비스다. EC2뿐만 아니라 컨테이너(ECS), AWS Lambda 등으로 다양한 서비스와 연계하여 부하를 분배할수 있다.
- ELB는 서로 다른 EC2 인스턴스에 대한 하나의 엔드포인트를 제공한다. 그래서 사용자는 실제 요청이 처리되는 백엔드 인스턴스에 대한 고려 없이, 동일한 엔드포인트로 요청을 전송할 수 있다. 거기다 부하분산뿐만 아니라 부하 분산 대상에 대한 헬스 체크(Health Check), 고정 세션(Sticky), SSL Offload(SSL 암복호화), 헬스 체크를 통한 다운 서버 제외 등이 가능하다.
- ELB(Elastic Load Balancing)는 AWS에서 운용하는 로드 밸런서(Load Balancer)를 지칭 하는 것으로 보면 된다.

## Load Balancing 기능
### 부하 분산 처리
- Load(부하) Balancing(분산)이란 컴퓨터 네트워크 기술의 일종으로 둘 혹은 셋이상의 중앙처리장치 혹은 저장장치와 같은 컴퓨터 자원들에게 작업을 나누는 것을 의미한다. 말그대로 부하를 분산해 트래픽이 과도하게 몰려 서비스가 중단되는 현상을 막기 위한 기술이다. 그래야 지연 없이 작업을 처리하고 속도를 낼 수 있다. 회사에서 팀장이 외부로부터 받아 처리해야 할 업무를 팀원들에게 나누어 주어 기간안에 일을 처리하는 행위 또한 부하 분산으로 볼 수 있다.

### 엔드포인트 역할 제공
- 로드 밸런서는 이런 부하를 분산하는 것 뿐만 아니라, 스케일 아웃에 대한 하나의 엔드포인트를 제공하기도 한다.
- aws의 경우 오토스케일링 그룹을 통해 다수의 인스턴스를 생성(스케일 아웃)하고 관리함으로써 고가용성을 확보할 수있고 안정적인 서비스를 제공할 수 있게 되었다. 그렇지만 이것을 사용하는 유저 입장에서는 증설된 각각의 인스턴스는 모두 다 일종의 컴퓨터이니 IP 주소를 갖고 있을테고, 이들을 관리하기 위해선 일일히 주소를 백업해 하나하나 접속하면서 관리해야 된다. 뿐만 아니라, 만약 인스턴스 하나가 떨어지고 다시 새로 인스턴스가 올라가게 된다면, IP주소가 바뀌게 되고 이에 대해 별도의 조치를 취해야한다. 더군다나 만약에 인스턴스가 8개가 아니라 엄청 많을 때는 관리비용이 엄청 증가 하게 된다. 따라서 오토스케일링 그룹 자체는 혁신적인 방법이지만 별도의 로드 밸런싱, 부하를 분산해주는 서비스 없이는 활용 불가이기 때문에 그래서 나온 서비스가 Elastic Load Balancing 인 것이다.
- 로드 밸런서(Load Balancer)에서 트래픽을 하나의 경로로 받아서 다수의 인스턴스에 분산하게 되어, 유저 입장에서는 각각의 인스턴스에 일일히 접근해서 관리하는게 아닌 하나의 주소로 접속해서 관리할 수 있게 된다. 인스턴스가 떨어져나가거나 오류가 나서 트래픽을 수신하지 못할 때에도 로드밸런서가 스마트하게(health check / monitoring) 알아서 트래픽을 전송하지 않게 하고, 새로운 인스턴스가 등록이 되면 자동으로 분산을 시켜준다.

### 오토 스케일링과 조합
- 오토 스케일링은 트래픽이 몰릴때 인스턴스(컴퓨터) 수를 자동으로 늘림으로서 서버 사이즈를 조절해 서비스가 원할히 유지되게 하며, 또한 트래픽이 적을경우 인스턴스를 감소시켜 비용 낭비를 막아주는 서비스이며, ELB(Elastic 로드 밸런서)는 트래픽을 오토 스케일링을 통해 늘린 수만개의 인스턴스들에게 부하(트래픽)를 분산하는 서비스 이다.
- 즉, 이 둘은 뗄레야 뗄수야 없는 관계이며, 같이 유기적으로 연동되어 EC2를 보다 효과적이게 이용 할 수 있게 한다. 그리고 실제로 이둘은 AWS 매니저에서 같이 설정하는 편이다.

![Image](https://github.com/user-attachments/assets/d54a1c0e-6f02-4934-9893-345f8df0de21)

## ELB 내부 구성 요소
- ELB는 Virtual Private Network(VPC)Visit Website에 탑재되며, 사용자의 요청을 받고 이를 VPC 내의 리소스(EC2 등)에 적절히 부하 분산한다. ELB는 외부의 요청을 받아들이는 리스너(Listener)와 요청을 분산/전달할 리소스의 집합인 대상 그룹(Target Group)으로 구성되, ELB는 다수의 리스너와 대상 그룹을 거느릴 수 있다.

### 리스너(Listener)
- 리스너는 프로토콜과 포트를 기반으로 요청을 받아 검사하고 이를 적절한 타겟으로 전달하는 기능을 수행한다. 그래서 이름에 'Listen' 이 붙는 것이다.
- 리스너는 외부의 요청을 받아들이기 때문에 모든 로드 밸런서는 최소 1개 이상의 리스너를 필요로 하며, 최대 10개까지 설정할 수 있다. 뿐만 아니라 SSL 인증서를 게시하여 SSL Offload를 실시할 수도 있다.

### 규칙(Rule)
- 리스너 룰(rule)은 리스너와 타겟 그룹 사이의 트래픽 분배를 위한 라우팅 규칙에 해당한다. 룰은 우선순위, 액션, 조건 등의 정보를 담고 있으며, path, host, HTTP header, source IP, query parameter 등의 다양한 조건이 만족되었을 때, 지정된 액션을 수행하는 방식으로 작동한다.

### 대상 그룹 (Target Group)
- 대상그룹은 리스너가 전달한 요청을 처리하기 위한 부하분산 대상들의 모임이다. 즉, ELB가 분산을 할 때 어디로 분산할 것이냐를 모은 그룹들이 대상그룹 이다. 그렇기에 대상 그룹에 등록된 EC2의 각종 정보(인스턴스 ID, Port, AZ)가 적혀있고, 이 EC2가 전달받은 요청을 처리할 수 있는지를 체크하는 '헬스 체크(Health Check)' 기능과, 이 대상 그룹에 요청 처리가 가능한 EC2가 몇 개인지, 불가능한 EC2는 몇 개인지를 확인하는 요청 처리에 관련된 '모니터링(Monitoring)' 기능이 들어있다.
- 쉽게 말하자면, 오토스케일링을 하기위해서 인스턴스들을 그룹으로 묶어 오토스케일링 그룹으로 만든 것처럼, 로드 밸런싱 하기위 해서 대상 인스턴스들을 묶어 놓은 그룹이라고 이해 하면된다. 그리고 다시 이 대상 그룹을 오토스케일링 그룹으로도 만들 수 있다. (ELB + Auto Scaling 조합)

### 유휴 제한 시간(Connection Time Out)
- 사용자가 ELB를 거쳐 EC2에 접근하여 서비스를 접속하면 Connection이 생성 되게 된다. 그리고 이 커넥션을 통해 사용자와 EC2가 통신을 하는 것이다. 만일 더 이상의 통신이 없을 땐, 유휴 제한 시간이 작동하게 되고, 그 시간(60초)이 지나면 커넥션이 사라진다. 즉, 유휴 제한 시간이란, 일정 시간동안 통신이 없을 때 커넥션을 삭제할 것인가를 뜻하는 것이다.


## ELB 기능 및 장점
 
### 고가용성 및 탄력성 (자동 확장/축소)
- ELB는 접속 부하에 맞게 자동적으로 리소스의 확장/축소를 수행한다. 따라서 대량의 요청이 발생해도 ELB로 인해 병목 현상이 발생하는 상황은 거의 일어나지 않는다. 하지만 순간적으로 접근이 증가하면 리소스 자동 확장까지 일정한 시간이 걸리므로, 일시적으로 병목 현상이 걸릴 수 있다. 만약 캠페인, 이벤트, TV 방영 등으로 인해 순간적인 요청 증가가 예상된다면, AWS 서포트에 미리 신청해서 ELB 리소스를 확장하는 것이 좋다. 또한 수신되는 트래픽을 단일 가용 영역 또는 여러 가용 영역의 Amazon EC2 인스턴스 전체에 걸쳐 배포할 수 있다.
- ELB의 확장/축소는 스케일업/스케일다운과 스케일아웃/스케일인이라는 2가지 방식이 상황에 맞게 이루어진다.  

### Health Check (상태 검사)
- ELB에 연결된 인스턴스에 직접 트래픽을 발생시켜 인스턴스가 살아있는지 체크하는 기능이다. 타겟 그룹에 대한 헬스 체크를 통해 현재 정상적으로 작동하는 인스턴스로만 트래픽을 분배한다.
- 인스턴스의 상태를 자동으로 감지해서 오류가 있는 시스템은 배제하고, 만일 인스턴스가 회복되면 LB가 자동으로 감지하여 인스턴스에 트래픽을 보내준다.
- 이를 통해 장애가 전파되는것을 방지하여 고가용성을 확보할 수 있으며, 상태 확인 개선을 통해 상세한 오류 코드를 구성할 수 있다. 또한 새로운 지표로 EC2 인스턴스에서 실행되는 각 서비스의 트래픽을 파악할 수 있다.
- 헬스 체크는 두가지 상태로 나뉘어진다
    - InService(서비스 살음)
    - OutofService(서비스 죽음)

### 도메인 기반 접근
- ELB는 지속적으로 IP주소가 바뀌며 IP 고정 불가능하여 따라서 항상 도메인 기반으로 사용해야 한다 자동 확장/축소 함에 따라 ELB 접근 IP가 변경되므로, ELB에 접근하는 경우 ELB를 생성할 때에 생성되는 도메인 이름을 사용해 접근하도록 구성해야 한다. 즉, DNS 이름을 통해 접속하면 ELB는 요청을 대상 그룹에 전달할 것이고 대상 그룹의 EC2가 요청을 처리하는 것이다.단, 네트워크 로드밸런서(NLB)는 탄력적 IP로 고정 가능하다.

### 추가적인 보안 그룹 설정
- 로드밸런서 또한 네트워크 인터페이스의 형태를 띄기 때문에 EC2 인스턴스 처럼 ELB와 관련된 보안 그룹을 생성 및 관리하여 로드 밸런서를 위한 추가 네트워킹 및 보안 옵션을 제공할 수 있다.
- 물론 EC2에도 보안 그룹이 있지만, 외부에 있는 ELB에 한번더 보안그룹을 설정해 외부의 공격(디도스)에 대해 강력하게 대비하는 개념으로 생각하면 된다.
원하는 Load Balancer를 인터넷과 연결되도록 구성하거나 퍼블릭 IP 주소 없이 로드 밸런서를 생성하여 인터넷에 연결되지 않은 내부 로드 밸런서로도 사용할 수 있다.

### SSL 지원
- SSL 암호화를 간편하게 구성 지원한다. 따라서 SSL 증명서를 인스턴스들에 따라 설정할 필요가 없어진다. 
- 통신의 암호화/복호화를 각각의 인스턴스에서 수행할 필요가 없으므로, 인스턴스의 부하를 낮출 수 있다. 또한, SSL 증명서를 ELB에서만 관리하면 되므로, 운용 측면에서의 장점도 가지게 된다.

### 고정 세션 (Sticky Session)
- 만일 서버가 여러개일경우, 사용자가 서버 인스턴스에 접근해 로그인을 하려고 할때 어느 서버의 인스턴스에 접근될지 모른다. 예를들어 A 인스턴스로 로그인하고 다음날 다시 서버에 접근하려는데 로드 밸런싱에 의해서 B 인스턴스로 가버려 세션이 없어 또 로그인해야 하는 상황이 올 수 도 있다. 인스턴스가 수십개면 수십번 로그인을 해야한다. 따라서 유저에게 쿠키를 생성해 접속정보를 갖고있도록 하고, ELB자체에서도 공간을 만들어 정보를 저장한다.
- 즉, 사용자 세션을 특정 인스턴스에 고정시킴으로서 자신이 이전에 접속했던 인스턴스로 다시 접속할 수 있도록 해준다.

## ELB 서비스 종류
- ELB는 대표적으로 4가지의 로드밸런서가 존재한다.
    - Application Load Balancer(ALB)
    - Network Load Balancer(NLB)
    - Classic Load Balancer(CLB) : 아주 초창기에 나온 로드 밸런서로 현재는 지원이 끊겨 deprecated 처리 되었음.
    - Gateway Load Balancer(GLB)


### CLB (Classic Load Balancer)
- Classic Load Balancer는 가장 기본적인 형태이자 초기에 제공되던 서비스이다. 가장 기본적인 로드 밸런서의 역할을 수행하지만 서버의 기본주소가 바뀌면 Load Balancer를 새로 생성해야하며 하나의 주소에 하나의 대상 그룹으로 밖에 못 보낸다. 또한, 데이터를 수정/변경할 수 없어 포트, 헤더 등의 변경을 하지 못한다.
- 이러한 구조는 서버의 구성과 아키텍처가 커지고 복잡해져 비용이 증가하게 된다. 예를 들어 쿠팡에서 회원관리(shop) 인스턴스와 주문(order) 인스턴스가 따로 존재한다고 하자. 로그인 후 주문을 하기 위해서는 그림 처럼 각각 다른 Load Balancer를 거쳐 해당 인스턴스로 접속해야 하므로 서버 개수, 비용이 증가하게 된다. 따라서 현재에는 CLB(Classic LoadBalancer)를 많이 사용하지 않아 레거시로 분류되었고, 주로 NLB 또는 ALB를 사용하여 구성하는 추세이다.

### ALB (Application Load Balancer)
- 7계층 (HTTP/HTTPS) 로드 밸런서
    - Application Load Balancer는 OSI 7 LayerVisit Website에서 최상단 일곱 번째 계층에 해당하는 Application Layer를 다루는 로드밸런서 이다. 사용자와 직접 접하는 계층으로서 여러분이 브라우저를 통해 이 블로그를 접속할 수 있도록 사용하는 프로토콜 역시 Application Layer에 해당하는 HTTP/HTTPS인 것이다.
- URL, Host, HTTP Header, Query String 등 애플리케이션 레벨에서의 라우팅 가능, Path-based 및 Host-based 라우팅 지원
    - ALB는 단순 부하분산뿐만 아니라 HTTP/HTTPS의 헤더 정보를 이용해 부하분산을 실시할 수 있다.즉, HTTP 헤더의 값들을 보고 이 요청은 어느 대상그룹으로 보낼지 저 요청은 어느 대상 그룹으로 보낼지를 판단할 수 있다는 뜻이다. 이를 지능적인 라우팅이라 한다. 
    - 예를 들어 위의 구식 CLB 같은경우는 각 대상 그룹 주소 마다 로드 밸런서를 각각 두었다. 하지만 ALB는 로드 밸런서 하나만 설정하면, 트래픽을 모니터링하여 각 대상그룹에 라우팅을 하게 해준다. /user path 경로로 오면 람다 대상그룹에 보내주고, /shop path로 오면 회원관리 대상그룹에 보내주는 식이다.이처럼 유저가 어떤 서버로 접속함에 따라서 다른 경로로 스마트하게 라우팅이 가능하다. 따라서 로드밸런서의 갯수를 줄일수 있고 이는 곧 비용 절감으로 이어진다.
    - ALB는 path(경로) 뿐만 아니라 port(포트)에 따라 다른 대상그룹으로 맵핑할 수도 있다. 각각의 포트에 따라 다르게 구성할 수 있으며 동일한 포트라도 path(경로)등에 따라 다르게 분기할 수도 있다 특히 포트 단위로 연결해줄 수 있는 것은 도커 컨테이너 환경에서 아주 유용하게 작동할 수 있고 하나의 대상그룹에 더 많은 컨테이너를 넣어 비용을 최적화할 수 있다.
- WebSocket 및 HTTP/2 지원
- Target Group은 IP 또는 EC2 인스턴스, Lambda도 가능
    - ALB는 대상을 EC2 인스턴스 뿐만 아니라 람다, IP로도 연결이 가능하며 특정한 요청에 대해서는 서버없이 직접 응답메세지를 작성할 수 있기 때문에 마이크로아키텍쳐를 구성하기에 좋다. 그리고 SSL 인증서를 탑재할 수 있어 대상 그룹의 EC2를 대신하여 SSL 암호화/복호화를 대신 진행할 수 있다.

- ABL은 TCP를 기반으로 하는 HTTP, HTTPS, WebSocket 등을 활용하며, HTTP의 주요 특징인 HTTP Header, Host Header, 요청 메서드 등에 기준을 적용하여 기준에 맞는 적절한 대상그룹으로 라우팅 할 수 있는 로드밸런서 이다. 
    - L7단의 로드 밸런서를 지원
    - HTTP/HTTPS 프로토콜의 헤더를 보고 적절한 패킷으로 전송
    - IP주소 + 포트번호 + 패킷 내용을 보고 스위칭
    - IP 주소가 변동되기 때문에 Client에서 Access 할 ELB의 DNS Name을 이용
    - L7단을 지원하기 때문에 SSL 적용이 가능

- 사용 사례 : 웹 서비스, 마이크로서비스, HTTP 라우팅 필요 시 사용한다.

### ALB 장점
- 세밀한 트래픽 제어 가능 (URL, Host 등 기반 라우팅)
- WAF, Cognito 같은 AWS 서비스와 연동 가능
- 다양한 백엔드(Target): Lambda, IP, ECS 등 지원
- 애플리케이션 수준의 모니터링 (ELB access logs, metrics 등)

### ALB 단점
- L7 처리이기 때문에 NLB보다 지연 시간이 길 수 있다.
- HTTP/HTTPS가 아닌 다른 프로토콜은 지원 불가


### NLB (Network Load Balancer)
- 4계층 (TCP/UDP) 로드 밸런서로 수백만 개의 요청을 초당 처리할 수 있다.(고성능)
    - Netowrk Load Balancer(NLB)는 AWS에서 제공하는 4가지 로드밸런서 중 하나로 OSI 7 Layer에서 네 번째 계층에 해당하는 Transport Layer를 다루는 로드밸런서이다. 따라서 NLB는 TCP와 UDP를 사용하는 요청을 받아들여 부하분산을 실시한다. 그래서 NLB는 ALB보다 성능이 더 빠르기 때문에 고성능을 요구하는 환경에서의 부하분산에 적합한 솔루션이다. 낮은 레이턴시로 초당 수백만 건의 요청을 처리할 수 있으며 갑작스러운 트래픽 증대 및 변화에도 최적화 되어있다. 단, HTTP가 아닌 하위 Layer인 TCP Layer에서 처리하므로 HTTP 헤더를 해석하지 못한다.
- 정적 IP 제공 또는 Elastic IP 사용 가능. 
    - ALB과 비교하여 NLB의 가장 큰 특징은 바로 EIP로 공인 IP를 고정 할 수 있다는 점이다. 그래서 ALB와 달리 로드밸런서에 접근 할때 아이피나 DNS 둘다 사용이 가능하다.
- 고정 포트 사용 가능 (특히 게임 서버, 금융 등)
    - TCP 세션은 350초 유지한다고 한다. 로드 밸런서가 연결 요청을 받으면 기본 규칙의 대상 그룹에서 대상을 선택하고 리스너 구성에 지정된 포트에서 선택한 대상에 대한 TCP 연결을 열려고 시도한다.

- 사용 사례 : 낮은 지연과 고성능이 필요할 때 (예: 금융, 게임), 소스 IP 보존이 중요할 때 사용한다.

### NLB 장점
- 매우 높은 성능 및 낮은 지연 시간
- 고정 IP 제공으로 보안 장비나 외부 연동 시 유리
- 다양한 프로토콜(TCP/UDP 등) 지원
- 소스 IP 보존 기능으로 백엔드에서 클라이언트 정보 활용 가능

### NLB 단점
- URL/Host 기반 라우팅 불가 (L4이기 때문에)
- WAF, Cognito 등 L7 서비스 연동 불가
- Lambda와 같은 비인프라 대상 연동 불가

### GWLB (Gateway Load Balancer)
- 3계층 (L3) 로드 밸런서
    - GWLB(Gateway Load Balancer)는 OSI(Open Systems Interconnection) 모델의 3 번째 계층인 네트워크 계층에서 작동한다. 
- 보안 어플라이언스(방화벽, IDS/IPS 등)를 서비스 체인처럼 배치할 수 있게 해줌
    - GWLB를 사용하면 방화벽, 침입 탐지 및 방지 시스템, 심층 패킷 검사 시스템과 같은 가상 어플라이언스를 배포, 확장 및 관리할 수 있다. 즉, 트래픽을 EC2에 도달하기전에 먼저 트래픽을 검사하거나 분석하거나 인증하거나 로깅하는 작업을 먼저 수행할 수 있게 하는 서비스이다.
- 위에서 배운 일반적인 로드밸런스 역할과는 다르니, 그냥 트래픽을 체크하는 녀석이라고 이해하고 넘어가도 된다.

- 사용사례 : 네트워크 트래픽을 중앙화된 보안 장비에 통과시켜야 할 때

### GWLB 장점
- 보안 장비(NGFW, IDS 등)를 확장 가능하고 고가용성으로 배포 가능
- L3 단에서 처리하므로 다양한 트래픽에 적용 가능
- 보안 아키텍처 표준화 및 중앙 통제 가능

### 단점
- L3만 처리하므로 일반적인 애플리케이션 로드 밸런싱에는 부적합
- 설정이 복잡하고, 네트워크 아키텍처에 대한 깊은 이해가 필요


### ALB와 NLB의 차이점
- ALB는 애플리케이션 계층에서의 로드 밸런싱을 제공하고, NLB는 네트워크 계층에서의 로드 밸런싱을 제공한다. 이 두 로드 밸런서의 주요 차이점은 다음과 같다.
    - ALB는 HTTP/HTTPS 트래픽을 처리하며, NLB는 TCP/UDP 트래픽을 처리한다. 왜냐하면 ALB와 NLB는 각각 다른 계층에서 동작하기 때문이다.
    - ALB는 URL 경로 기반 라우팅과 호스트 기반 라우팅을 지원한다. ALB는 애플리케이션 계층에서 동작하여 다양한 라우팅 옵션을 제공하기 때문이다. NLB는 이러한 기능을 지원하지 않는다. 
    - NLB는 매우 낮은 지연 시간을 제공하며, 정적 IP 주소와 TLS 종료를 지원한다. 왜냐하면 NLB는 네트워크 계층에서 동작하여 높은 성능을 제공하기 때문이다.  반면, ALB는 이러한 기능을 제공하지 않는다.
    - ALB는 WebSocket 및 HTTP/2를 지원한다. 왜냐하면 ALB는 애플리케이션 계층에서 동작하여 실시간 통신 및 효율적인 데이터 전송을 지원하기 때문이다. NLB는 이러한 기능을 지원하지 않는다.

### ALB와 NLB의 활용 사례
- ALB는 주로 웹 애플리케이션에서 사용된다. ALB는 HTTP/HTTPS 트래픽을 처리하며, URL 경로 기반 라우팅과 호스트 기반 라우팅을 지원하기 때문이다. 이를 통해 다양한 웹 애플리케이션을 효과적으로 관리할 수 있다.
- 반면, NLB는 주로 높은 성능을 요구하는 애플리케이션에서 사용된다. NLB는 매우 낮은 지연 시간을 제공하며, 정적 IP 주소와 TLS 종료를 지원하기 때문으로 이를 통해 높은 성능을 요구하는 애플리케이션을 효과적으로 관리할 수 있다.

### 질문
#### ALB와 NLB의 차이점은 무엇인가?
- ALB와 NLB는 모두 AWS에서 제공하는 로드 밸런서지만, 처리 계층과 사용 목적에 따라 큰 차이가 있다. ALB(Application Load Balancer)는 7계층(애플리케이션 레벨)에서 동작하여, HTTP/HTTPS 트래픽에 특화되어 있습니다. Host, Path, Header 등 다양한 조건으로 세밀한 라우팅 제어가 가능하며, WAF, Cognito 같은 보안 서비스와의 연동도 지원됩니다. 주로 웹 서비스나 마이크로서비스 환경에 적합합니다. URL 경로 기반 라우팅과 호스트 기반 라우팅을 지원하기 때문이다. 이를 통해 다양한 웹 애플리케이션을 효과적으로 관리할 수 있습니다.
- 반면, NLB(Network Load Balancer)는 4계층(전송 계층)에서 동작하여, TCP/UDP 트래픽을 매우 빠르게 처리할 수 있습니다. 초당 수백만 건의 요청을 처리할 수 있을 정도로 고성능과 낮은 지연 시간이 강점이며, 정적 IP 제공과 소스 IP 보존이 가능해 금융 서비스나 게임 서버 같이 네트워크 성능과 IP 제어가 중요한 환경에 적합합니다.
- 요약하자면, ALB는 HTTP 기반의 애플리케이션 레벨 라우팅이 필요할 때, NLB는 고성능과 네트워크 레벨 제어가 필요한 환경에서 사용됩니다.

#### ELB와 Auto Scaling은 어떤 관계가 있으며, 왜 함께 사용하는 것이 좋은가요?
- ELB와 Auto Scaling은 서로 보완적인 관계로, 고가용성과 효율적인 리소스 관리를 위해 함께 사용하는 것이 좋습니다. Auto Scaling은 트래픽에 따라 EC2 인스턴스 수를 자동으로 조절하여 확장/축소를 수행하고, ELB는 늘어난 인스턴스들에 트래픽을 자동으로 분산시켜줍니다. 이 조합을 통해 예기치 못한 트래픽 급증 상황에서도 안정적인 서비스를 유지할 수 있고, 트래픽이 적을 땐 불필요한 인스턴스를 제거해 비용도 절감할 수 있습니다.

#### ELB가 제공하는 보안 기능은 어떤 것들이 있고, 왜 중요한가요?
- ELB는 자체 보안 그룹을 설정할 수 있으며, EC2 인스턴스 앞단에서 외부 공격을 방어하는 추가 방어선 역할을 합니다. 예를 들어, DDoS 공격에 대비해 ELB 보안 그룹을 따로 설정할 수 있고, 인터넷에 노출되지 않은 내부 로드 밸런서로 구성하는 것도 가능합니다. 또한 SSL 인증서를 ELB에 설정해 SSL 통신을 종단에서 처리함으로써 EC2 인스턴스의 부하를 줄이고, 보안성과 성능을 동시에 확보할 수 있습니다.

### Nginx 대신 AWS ELB를 사용하는 게 더 좋은 이유는?
- AWS 환경에서는 로드밸런서를 구성할 때 Nginx보다는 AWS ELB를 사용하는 게 더 적합한 경우가 많다고 생각합니다.
- 첫째, ELB는 AWS가 제공하는 매니지드 서비스이기 때문에 운영 부담이 적습니다. 서버에 직접 설치하고 설정을 관리해야 하는 Nginx와 달리, ELB는 장애 대응, 보안 패치, 확장 등 인프라 수준의 관리가 자동화되어 있어 안정성이 높습니다.
- 둘째, Auto Scaling 그룹과의 연동이 자연스럽습니다. EC2 인스턴스가 동적으로 늘거나 줄어도 ELB가 자동으로 대상 그룹을 갱신해주기 때문에 별도 스크립트나 설정 변경이 필요 없습니다. 반면 Nginx는 백엔드 서버 IP를 수동으로 관리하거나 별도 도구를 붙여야 합니다.
- 셋째, 고가용성 측면에서도 ELB가 유리합니다. 여러 가용 영역(AZ)에 걸쳐 인프라가 구성되므로 단일 장애 지점(SPOF)이 없고, 탄탄한 장애 복구 구조를 기본적으로 갖추고 있습니다.
- 또한, ALB는 7계층 라우팅 기능도 제공해서, URL 경로, 헤더 기반의 정교한 라우팅도 지원합니다. 이런 기능은 Nginx로도 구현은 가능하지만 설정이 복잡하고 운영 포인트가 많아집니다.
- 마지막으로, SSL 인증서 관리도 AWS Certificate Manager와 연동되어 간편하게 적용 및 갱신할 수 있다는 장점이 있습니다.
- 반대로, 테스트 환경이나 트래픽이 적은 서비스, 혹은 복잡한 커스텀 프록시 설정이 필요한 경우에는 Nginx도 좋은 선택이 될 수 있다고 생각합니다. 하지만 운영 안정성, 확장성, 자동화 관점에서는 AWS ELB가 더 적합하다고 판단합니다.



----

참고링크 

https://inpa.tistory.com/entry/AWS-%F0%9F%93%9A-ELB-Elastic-Load-Balancer-%EA%B0%9C%EB%85%90-%EC%9B%90%EB%A6%AC-%EA%B5%AC%EC%B6%95-%EC%84%B8%ED%8C%85-CLB-ALB-NLB-GLB