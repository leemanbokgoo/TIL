# 8.1 스프링이란 무엇인가?
## 8.1 스프링의 정의
- "자바 엔터프라이즈 개발을 편하게 해주는 오픈소스 경량급 어플리케이션 프레임워크"

### 어플리케이션 프레임워크
- 프레임워크는 애플리케이션의 특정 계층에서 주로 동작하는 한 가지 기술 분야에 집중된다. 하지만 스프링은 이와 다르게 ‘애플리케이션 프레임워크’라는 특징을 갖고 있다. 애플리케이션 프레임워크는 애플리케이션 개발의 전 과정을 빠르고 편리하며 효율적으로 진행하는데 일차적인 목표를 두는 프레임워크다.
- 어플리케이션 프레임워크는 특정 계층이나 기술, 업무분야에 국한되지않고 어플리케이션의 전 영역을 포괄하는 범용적인 프레임워크를 말한다. 
- 로드 존슨이 2003년에 쓴 Expert One-on-One J2EE Design and Develpment’라는 책을 출간했다. 이 책의 중요한 전략의 하나는 “항상 프레임워크 기반으로 접근하라”는 것이었다. 당연히 이 책의 예제 애플리케이션도 프레임워크를 먼저 만들고 나서, 프레임워크를 이용하는 코드를 만드는 방식으로 작성됐다. 바로 이 예제에 포함된 프레임워크가 스프링 프레임워크의 기원이다.
- 스프링은 애플리케이션 전 영역을 관통하는 일관된 프로그래밍 모델과 핵심 기술을 바탕으로 해서 각 분야의 특성에 맞는 필요를 채워주고 있기 때문에, 애플리케이션을 빠르고 효과적으로 개발할 수가 있다.
- 스프링의 일차적인 존재 목적은 핵심 기술에 담긴 프로그래밍 모델을 일관되게 적용해서 엔터프라이즈 애플리케이션 전 계층과 전 영역에 전략과 기능을 제공해줌으로써 애플리케이션을 편리하게 개발하게 해주는 애플리케이션 프레임워크로 사용되는 것임을 기억해두자.

### 경량급
- 스프링은 20여 개의 모듈로 세분화되고 수십만 라인에 달하는 코드를 가진 매우 복잡하고 방대한 규모의 프레임워크다. 그럼에도 스프링이 가볍다고 하는 이유는 무엇일까? 그것은 불필요하게 무겁지 않다는 의미다.
- 결과적으로 스프링은 EJB를 대표로 하는 기존의 많은 기술이 불필요하게 무겁고 복잡했음을 증명하는 셈이고, 그런면에서 스프링은 군더더기 없이 깔끔한 기술을 가진 '경량급' 프레임워크라고 불린 것이다.
- 스프링 위에서 만들어진 코드가 지원하는 기술수준은 비슷하더라도 그것을 훨씬 빠르고 간편하게 작성하게 해줌으로써 생산성과 품질 면에서 유리하다는 것이 바로 경량급이라는 말로 표현되는 스프링의 특징이다.

### 자바 엔터프라이즈 개발을 편하게
- 애플리케이션 개발이란 개발자가 복잡하고 실수하기 쉬운 로우레벨 기술에 많은 신경을 쓰지 않으면서도 애플리케이션의 핵심인 사용자의 요구사항, 즉 비지니스 로직을 빠르고 효과적으로 구현하는 것을 말한다.
- 스프링은 애플리케이션 개발자들이 스프링이라는 프레임워크가 제공하는 기술이 아니라 자신이 작성하는 애플리케이션의 로직에 더 많은 관심과 시간을 쏟게 해준다.
- 스프링은 EJB와 동일하게 ‘애플리케이션 작성을 편하게 해준다’라는 목적을 추구하지만 그 과정에서 다른 불편함을 추가하지 않아도 되게 해준다.

### 오픈소스
- 스프링은 아파치 라이선스 버전 2.0을 사용한다.
- 스프링은 SpringSource 라는 회사에서 그 개발을 전적으로 책임지고 전담하고 있다.
- 스프링은 모든 개발 과정이 공개되어 있지만 실제 개발에 참여할 수 있는 개발자들은 제한되어 있다.
- SpringSource는 2009년에 VMWare에 합병되었다.

# 8.2 스프링의 목적
- 자바를 가져다가 절차지향 언어처럼 사용한다면 자바를 사용하는 가치를 얻을 수 없다.
- 어떤 기술이든 그 자체로는 도구에 불과하다. 그것을 용도에 맞게 잘 활용해서 궁긍적으로 이루고자 하는 목표를 이루는 것이 중요하지, 도구의 사용법만 열심히 익힌다고 결과를 저절로 얻을 수 있는 건 아니다.
- 스프링을 사용해서 엔터프라이즈 애플리케이션 개발을편하게 하려는 이유는 무엇일까? 원래 엔터프라이즈 개발이란 편하지 않기 때문이다.

## 8.2.1 엔터프라이즈 개발의 복잡함
- 자바 엔터프라이즈 개발이 실해파는 이유에 대해 많은 논의가 있었다. 그 과정에서 밝혀진 여러가지 원인이 있었지만, 그중 가장 대표적인 게 '엔터프라이즈 시스템 개발이 너무 복잡해져서'였다.

### 복잡함의 근본적인 이유
- 기술적인 제약조건과 요구사항이 늘어가기 때문이다.
    - 엔터프라이즈 시스템이란 서버에서 동작하며 기업과 조직의 업무를 처리해주는 시스템을 말한다. 
    - 즉, 엔터프라이즈 시스템을 개발하는 데는 순수한 비즈니스 로직을 구현하는 것 외에도 기술적으로 고려할 사항이 많다는 뜻이다.
- 애플리케이션이 구현해야 할 핵심기능인 비지니스 로직의 복잡함이 증가하기 때문이다.

### 복잡함을 가중시키는 원인
- 복잡하다는 건 단지 양이 많고 어렵다는 뜻이 아니다. 세부 요소가 이해하기 힘든 방식으로 얽혀 있고, 그 때문에 쉽게 다루기 어렵다는 의미이다. 자칫 잘못 손을 댔다가는 더 엉망이 되기 쉬우며, 들인 노력과 시간이 허사가 될 수도 있다.
- 자바 엔터프라이즈 시스템 개발의 어려운 가장 큰 이유는 근본적인 비즈니스 로직과 엔터프라이즈 기술이라는 두 가지 복잡함이 한데 얽혀 있기 때문이다.
- 일반적으로 사람은 성격이 다른 두 가지 종류의 일을 동시에 생각하고 처리하는데 매우 취약하다.

## 8.2.2 복잡함을 해결하려는 도전
### 제거될 수 없는 근본적인 복잡함
- 결국 근본적으로 엔터프라이즈 개발에 나타나는 복잡함의 원인은 제거 대상이 아니다. 대신 그 복잡함을 효과적으로 상대할 수 있는 전략과 기법이 필요하다. 문제는 비지니스 로직의 복잡함을 효과적으로 다루기 위한 방법과 기술적인 복잡함을 효과적으로 처리하는 데 적용되는 방법이 다르다는 점이다. 따라서 두 가지 복잡함이 코드에 한데 어우러져 나타나는 전통적인 개발 방식에서는 효과적으로 복잡함을 다루기가 힘들다. 따라서 가장 먼저 할 일은 성격이 다른 이 두 가지 복잡함을 분리해내는 것이다.

### 실패한 해결책: EJB
- EJB 역시 개발자가 로우레벨의 기술적인 복잡함에 신경쓰지 않고 비즈니스 로직을 효과적으로 개발하는 데 더 집중할 수 있게 하자는 목표가 있었다.
- 그러나 애플리케이션 로직을 담은 핵심 코드에서 일부 기술적인 코드가 제거된 건 사실이지만, 오히려 EJB라는 환경과 스펙에 종속되는 코드로 만들어져야 하는 더 큰 부담을 안게 됐다.
- EJB는 결국 일부 기술적인 복잡함을 덜어주려는 싣도를 하다가 오히려 더 큰 복잡함을 추가하는 실수를 범했다.
- EJB는 결국 객체지향적인 특성은 잃어버린 밋밋한 서비스 스크립트성 코드로 변질돼갔다.
- 게다가 EJB의 발전주기는 너무 느려서 엔터프라이즈 개발 기술의 발전을 따라잡지 못하는 문제도 있었다.

### 비침투적인 방식을 통한 효과적인 해결책: 스프링
- 스프링은 EJB의 실패를 교훈으로 삼아서 출발했다. EJB의 처음 목표와 마찬가지로 기술적인 복잡함을 애플리케이션 핵심 로직에서 제거하는 데 목표를 뒀다.
- EJB처럼 어떤 기술을 적용했을 때 그 기술과 관련된 코드나 규약 등이 코드에 등장하는 경우를 침투적인 기술이라고 한다. 반면에 비침투적인 기술은 기술의 적용 사실이 코드에 직접 반영되지 않는 특징이 있다. 물론 기술의 적용에 따라 필요한 작업을 해줘야 하겠지만, 애플리케이션 코드 여기저기에 불쑥 등장하거나, 코드의 설계와 구현 방식을 제헌하지는 않는다는 게 비침투적인 기술의 특징이다.
- 스프링 스스로가 애플리케이션 코드에 불필요하게 나타나지 않도록 하는 것이다. 꼭 필요할 것 같은 경우조차도 기술 코드가 직접 노출되지 않도록 만들어줬다.
- 스프링을 적용한다고 해서 근본적인 복잡함의 원인이 사라지는 건 아니다. 하지만 스프링을 통해 성격이 다른 복잡함들을 깔끔하게 분리해줬기떄문에 각각을 효과적으로 상대할 수 있는 기반이 마련됐다.

## 8.2.3 복잡함을 상대하는 스프링의 전략
- 스프링의 기본적인 전략은 비즈니스 로직을 담은 애플리케이션 코드와 엔터프라이즈 기술을 처리하는 코드를 분리시키는 것이다.

### 기술적 복잡함을 상대하는 전략
- 첫 번째 문제: 기술에 대한 접근 방식이 일관성이 없고, 특정 환경에 종속적이다.
    - 일관성 없는 기술과 서버환경의 변화에 대한 스프링의 공략 방법은 바로 서비스 추상화이다.
    - 기술적인 복잡함은 일단 추상화를 통해 로우레벨의 기술 구현 부분과 기술을 사용하는 인터페이스를 분리하고, 환경과 세부 기술에 독립적인 접근 인터페이스를 제공하는 것이 가장 좋은 해결책이다.
    - 스프링이 제공하는 템플릿/콜백 패턴은 판에 박힌 반복적인 작업 흐름과 API 사용 코드를 제거해준다. 이를 통해 기술을 사용하는 코드도 최적화된 핵심 로직에만 집중하도록 도와준다.
- 두 번재 문제: 기술적인 처리를 담당하는 코드가 성격이 다른 코드에 섞여 등장한다.
    - 기술과 비즈니스 로직의 혼재로 발생하는 복잡함을 해결하기 위한 스프링의 접근 방법은 바로 AOP다. AOP는 최후까지 애플리케이션 로직을 담당하는 코드에 남아 있는 기술 관련 코드를 깔끔하게 분리해서 별도의 모듈로 관리하게 해주는 강력한 기술이다. AOP를 적용하지 않았을 때는 기술과 비지니스 로직이 지저분하게 얽혀서 다루기 힘들다는 문제도 있지만, 기술적인 코드가 여기저기 중복돼서 나타난다는 것도 심각한 문제점이다. 이 때문에 기술적인 작업을 처리하는 방식이 변경될 경우 많은 곳을 수정해야 한다. AOP는 기술을 다루는 코드로 인한 복잡함이 기술 그 자체 이상으로 불필요하게 증대되지 않도록 도와주는 가장 강력한 수단이다.

### 비즈니스와 애플리케이션 로직의 복잡함을 상대하는 전략
- 기술적인 오류는 시스템을 복구하거나 빠르게 대응해주면 당장에 큰 문제가 발생하지는 않는다. 그러나 비즈니스 로직을 다루는 핵심 코드에 오류가 있으면 치명적인 문제가 발생할 수 있다.
- 스프링은 다만 뒤에서 비즈니스 로직을 담당하는 객체들에게 적절한 엔터프라이즈 기술 서비스가 제공되도록 은밀히 도울 뿐이다.
- 결국 비즈니스 로직의 복잡함을 상대하는 전략은 자바라는 객체지향 기술 그 자체다. 스프링은 단지 객체지향 언어의 장점을 제대로 살리지 못하게 방해했던 요소를 제거하도록 도와줄 뿐이다.

### 핵심도구: 객체지향과 DI
- 스프링의 모토는 결국 “기본으로 돌아가자”이다. 자바의 기본인 객체지향에 충실한 설계가 가능하도록 단순한 오브젝트로 개발할 수 있고, 객체지향의 설계 기법을 잘 적용할 수 있는 구조를 만들기 위해 DI 같은 유용한 기술을 편하게 적용하도록 도와주는 것이 스프링의 기본 전략이다.
- 지금까지 살펴봤듯이 기술적인 복잡함을 효과적으로 다루게 해주는 기법은 모두 DI를 바탕으로 하고있다.
- 결국 모든 스프링의 기술과 전략은 객체지향이라는 자바 언어가 가진 강력한 도구를 극대화해서 사용할 수 있도록 돕는 것이라고 볼 수 있다. 스프링은 단지 거들 뿐이다.
- 스프링만 잘 공부하면 자바 언어 자체나 객체지향 설계와 개발 실력 따윈 별로 신경 쓰지 않아도 복잡한 엔터프라이즈 시스템 개발을 잘할 수 있을 거라고 생각하면 오산이다.
