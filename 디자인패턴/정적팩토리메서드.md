# 정적 팩토리 메서드 (Static Factory Method Pattern)
- 정적 팩토리 메서드(Static Factory Method) 패턴은  Static Method를 통해 간접적으로 생성자를 호출하는 객체를 생성하는 디자인 패턴이다. 보통 객체를 인스턴스화 할때는 직접적으로 생성자(Constructor)를 호출하여 생성한다. 하지만 정적 팩토리 매세더는 직접 생성자를 호출 하지않고 별도의 객체 생성의 역할을 하는 클래스 메서드를 통해 간접적으로 객체 생성을 유도하는 것이다. 그리고 이 정적 메서드를 통칭적으로 정적 팩토리 메서드 패턴이라고 부르는 것이다. 여기서 팩토리라는 용어는 GOF 디자인 패턴 중 팩토리 패턴에서 유래한 단어로 객체를 생성하는 역할을 분리하겠다는 의미로 쓰인다. 다시 말해 정적 팩토리 메서드란 객체 생성의 역할을 하는 클래스 메서드라고 볼수있다. 
- 아래의 예시코드를 한번 살펴보자. 아래의 코드는 자바의 java.time 패키지에 포함된 LocalTime 클래스의 정적 팩토리 메서드이다. ﻿예시 코드에서 보는 LocalTime 클래스의 of 메서드처럼 직접적으로 생성자를 통해 객체를 생성하는 것이 아니라 메서드를 통해서 객체를 생성하고있다. 

```
// LocalTime.class
...
public static LocalTime of(int hour, int minute) {
  ChronoField.HOUR_OF_DAY.checkValidValue((long)hour);
  if (minute == 0) {
    return HOURS[hour];
  } else {
    ChronoField.MINUTE_OF_HOUR.checkValidValue((long)minute);
    return new LocalTime(hour, minute, 0, 0);
  }
}
...

// hour, minutes을 인자로 받아서 9시 30분을 의미하는 LocalTime 객체를 반환한다.
LocalTime openTime = LocalTime.of(9, 30);

```

- 위의 예시가 다른 코드들이 많아 이해가 가지않는 다면 좀 더 쉬운 예시를 가져와보겠다.

```
class Book {
    private String title;
    
    // 생성자를 private화 하여 외부에서 생성자 호출 차단
    private Book(String title) { this.title = title; }
    
    // 정적 팩토리 메서드
    public static Book titleOf(String title) {
        return new Book(title); // 메서드에서 생성자를 호출하고 리턴함
    }
}
public static void main(String[] args) {
	// 정적 메서드 호출을 통해 인스턴스화된 객체를 얻음
    Book book1 = Book.titleOf("어린왕자"); 
}

```

- 위의 코드를 보면 생성자를 private로 선언해서 외부에서 생성자 호출을 차단하고 메서드에서 생성자를 호출 하고 리턴한다. 즉, 정적 팩토리 메서드를 통해 객체를 생성하고있다. 그렇다면 왜 간단하게 생성자를 호출하지않고 불편하게 정적 팩토리 메서드를 통해 객체를 생성해야할까? 이는 생성자의 본질적인 문제점을 극복하기위해서이다.

## 정잭 팩토리 메서드 특징
### 1. 생성 목적에 대한 이름 표현이 가능하다.즉 이름을 가질 수 있다.
- 객체는 생성 목적과 과정에 따라 생성자를 구분해서 사용할 필요가 있다. new 라는 키워드를 통해 객체를 생성하는 생성하는 내부 구조를 잘 알고 있어야 목적에 맞게 객체를 생성 할 수 있다. 하지만 정적 팩토리 메서드를 사용하면 메서드 이름에 객체의 생성 목적을 담아낼 수 있다. 이를 이해하기위해 코드를 살펴보자

```
class Movie {
    private String name;
    private String time = "9:00";

    public Movie(String name, String time) {
        this.name = name;
        this.time = time;
    }

    public Movie(String name) {
        this.name = name;
    }
}


public static void main(String[] args) {
    // 영화 파묘
    Moive movie = new Moive("파묘");

    // 영화 파묘 10:00
    Moive movie2 = new Moive("파묘", "10:00");
}

```

- 위의 코드에서는 생성자를 입력할때 영화 이름은 반드시 외부로부터 입력을 받아야하지만 영화 시간은 선택적으로 입력받을 수 있다. 즉 객체 생성시에 2가지 선택지(영화 시간을 입력할지, 입력하지않을지)가 주어지는데 이를 생성자를 통해 구현하면 생성자를 2개 만들고 호출하는 쪽에서 생성자의 인자 갯수를 다르게 할당함으로써 객체를 생성한다.

- 위의 방식에는 문제점이 있다.생성자만으로는 해당 생성자가 어떤 객체를 반환하는지 알수가 없다. 해당 생성자에 몇개를 몇번째 인자에 어떤 타입을 할당해야 자신이 원하는 Movie 객체를 생성할 수 있는 지 알기위해서는 Movie 클래스를 살펴보여야한다.  하지만 정적 메서드 팩토리를 사용한다면 반환할 객체의 특성을 유추할 수 있도록 네이밍을 붙여줄 수 있다. 그렇다면 위의 코드를 정적 팩토리 메서드를 사용해 개선해보자.

```
class Movie {
    private String name;
    private String time;

    // private 생성자
    private Movie(String name, String time) {
        this.brand = name;
        this.color = time;
    }

    // 정적 팩토리 메서드 (매개변수 하나는 from 네이밍)
    public static Movie movieFrom(String name) {
        return new Movie(name, "9:00");
    }

    // 정적 팩토리 메서드 (매개변수 여러개는 of 네이밍)
    public static Movie movieTimeOf(String name, String time) {
        return new Movie(name, time);
    }
}


public static void main(String[] args) {
    // 파묘
    Moive movieNine = Moive.movieFrom("파묘");

    // 파묘 10시
    Moive moiveTen = Moive.movieTimeOf("파묘", "10:00");
}

```

- 이렇게 정적 팩토리 메서드를 사용하면 코드의 가독성을 높여주게 되며 객체 생성의 의미를 훨씬 파악하기 쉽다.﻿ 참고로 정적 팩토리 메서드를 구성하고자 한다면, 반드시 생성자에 private 접근 제어자를 두어 외부에서 new 키워드를 이용하여 객체를 생성하는 것을 잊어선 안된다.