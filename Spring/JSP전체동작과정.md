
# HTTP VS JSP
- HTMl은 단순히 서버 파일을 웹 브라우저로 보내주는 것
- JSP는 서버에서 프로그램 실행결과를 HTMl로 변형하여 웹브라우저로 전달
- 즉, 웹서버가 요청 내용을 분석하고 서블릿 컨테이너에 전달하면 HTML문서 형태를 반환하는 과정

## 웹서버 WAS?
- 웹서버 : 정적인 데이터만 처리하는 서버 (HTML, img등)
- WAS(Web Application Server): 동적인 데이터를 처리하는 서버(DB 등) 비즈니스 로직 처리 
![image](https://github.com/user-attachments/assets/9120d665-1784-47e5-97dc-734f206b9574)
    - 1. 웹브라우저에서 URL을 입력한다
    - 2. DNS로부터 입력한 URL을 변환한 IP주소를 받는다.
    - 3. (HTTP헤더) 받은 IP주소의 웹 서버 8080포트에 JSP페이지(기능 수행에 필요한 정보 파라미터)를 요청한다.
    - 4. 웹서버가 요청 내용을 분석하고 서블릿 컨테이너에 요청을 넘겨 처리하다
    - 5. 화명네 보일 내용을 HTML 문서형태로 웹브라우저에 전송한다.
- 3~5번에서 JSP/서블릿 컴파일 과정이 이루어진다.
- 3번 -> 웹브라우저가 웹서버에 웹페이지를 달라고 하는 것 : 요청(Request)
- 5번 -> 요청한 웹 페이지를 웹브라우저에 제공하는 것 : 응답(Response)
- 요청과 응답은 Text 형식으로 보내진다.

## JSP 서블릿 컴파일 처리 과정
- servlet : JAVA 소스 파일로 작성된 파일 구조 
- WAS는 JSP 페이지에 대한 요청이 들어오면 다음과 같은 처리를 한다.

![image](https://github.com/user-attachments/assets/2dd86934-e0a9-4bde-ac47-77149cbde24f)

- 1. JSP와 관련된 서블릿 클래스가 없는 경우 (1.1)
    - JSP 페이지로부터 자바 코드를 생성한다. (1.2)
    - 자바 코드를 컴파일해서 서블릿 클래스를 생성한다. (1.3)
    - 변환된 서블릿 클래스를 실행하고, WAS의 메모리에 적재된다.
    - 서블릿에 클라이언트 요청을 전달한다. (2.1)
    - 서블릿의 요청을 처리한 결과를 응답으로 생성한다. (2.2)
    - 응답을 웹 브라우저에 전송한다. (3)
-   2. JSP에 해당하는 서블릿이 존재하는 경우(즉, 이미 과정 1.1 ~ 1.3을 거친 경우)
    - 서블릿에 클라이언트 요청을 전달한다. (2.1)
    - 서블릿의 요청을 처리한 결과를 응답으로 생성한다. (2.2)
    - 응답을 웹 브라우저에 전송한다. (3)
    ![image](https://github.com/user-attachments/assets/b17cbb9a-fc16-4504-8346-cbf355f1abd5)

## Port
- 컴퓨터 안에 설치된 서버에 접속하는 주소
- 한 개의 컴퓨터에는 웹 서버 프로그램만 실행되는 것이 아니다.
- 웹 서버 프로그램과 함께 동영상을 제공해주는 스트리밍 서버 프로그램도 실행될 수 있고, 채팅 서비스를 위한 채팅 서버 프로그램이 실행될 수 있다.
- IP주소는 연결할 컴퓨터를 구분하는데 사용되기 때문에, IP 주소만으로는 컴퓨터의 어떤 서버 프로그램을 실행할 지 알 수 없다.
- 그래서 각 서버 프로그램은 클라이언트가 연결할 때 다른 서버 프로그램과 구분할 수 있도록 포트(port)를 사용한다.
- http://localhost:8080/04_17/time.jsp : 뒤의 8080이 포트 번호이다.

### 질문
#### JSP와 HTML의 차이점은 무엇인가요?
- HTML은 정적인 페이지를 서버에서 웹 브라우저로 단순히 전달하는 역할만을 합니다. 즉, 서버에서 변환이나 실행이 필요하지 않은 문서를 그대로 브라우저로 보냅니다. 반면, JSP(JavaServer Pages)는 서버에서 동적으로 HTML 페이지를 생성하는 기술입니다. JSP 파일은 서버에서 필요한 비즈니스 로직이나 데이터를 처리한 후, 그 결과를 HTML로 변환하여 브라우저로 전달합니다. 이 과정에서 JSP 파일이 서블릿으로 변환되고, 서버 측에서 실행되어 결과를 HTML 형식으로 웹 브라우저에 보냅니다.

#### JSP 파일이 서블릿으로 컴파일되는 과정은 어떻게 이루어지나요?
- JSP 파일이 서버에 요청되면, WAS(Web Application Server)는 해당 JSP에 대한 서블릿 클래스가 존재하는지 확인합니다. 서블릿이 없을 경우, JSP 페이지를 자바 코드로 변환한 후, 이를 컴파일하여 서블릿 클래스를 생성합니다. 이렇게 생성된 서블릿 클래스는 메모리에 적재되고, 클라이언트의 요청이 이 서블릿 클래스로 전달됩니다. 이후, 서블릿은 요청을 처리한 결과를 HTML 형식으로 웹 브라우저에 응답으로 전송합니다. 이 과정은 초기 요청에서 한 번만 발생하며, 이후 요청에서는 이미 생성된 서블릿을 사용하여 빠르게 응답할 수 있습니다.


참고링크 
https://velog.io/@jipark09/JSP