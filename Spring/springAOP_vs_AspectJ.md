# Spring AOP VS AspectJ
- Spring AOP와 AspectJ는 스프링 프레임워크에서 AOP를 구현하는데에 있어 사용할 수 있는 구현 방식중 하나
## Spring AOP
- 스프링 프레임워크에서 제공하며, Dynamic Proxy, CGLib Proxy를 사용한 프록시 생성, 메서드 실행의 전후의 조인포인트에 어드바이스를 삽입하는 방식으로 AOP를 구현한다. 즉, 런타임 환경에서 위빙을하는 런타임 위빙의 방식이다.
- Spring AOP는 프록시 기반 AOP입니다. 이는 주로 Spring 컨테이너에서 관리되는 빈(bean)에 대해 적용된다. Spring AOP는 런타임에 프록시 객체를 생성하여, 해당 객체에 대한 호출을 가로채고, 해당 부가적인 로직을 처리하는 방식이다. 주로 인터페이스 기반 AOP입니다. 즉, 인터페이스를 구현한 클래스에 대해서만 AOP 기능을 적용할 수 있다.
- Spring AOP는 프록시 객체를 사용하는 방식이므로 성능에 있어 약간의 오버헤드가 있을 수 있다. 주로 동적 프록시를 사용하며, 이는 메서드 호출 시 프록시 객체가 관여하므로 성능에 영향을 미칠 수 있다. 그러나 Spring AOP는 대부분의 경우 비즈니스 로직과 결합되는 정도가 적고, 예외적인 경우에만 프록시를 사용하므로 일반적으로 성능에 큰 영향을 미치지 않는다.

### 장점
- 스프링 프레임워크의 일부 기능으로 추가적인 컴파일러가 필요없어 AspectJ에 비하여 더 간단하다. JDK Dynamic Proxy 또는 CGLib를 사용하여 인터페이스와 클래스 모두에 AOP를 적용할 수 있다. XML을 통하여 설정을 하거나 @Aspect 어노테이션을 사용하여 설정할 수 있다.

### 단점
- 프록시 기반 AOP이므로 런타임시. 즉, 메서드 실행 전후에서만 조인포인트를 사용할 수 있다.
- 동일한 클래스 내에서 다른 메서드를 호출하면 Aspect가 적용되지 않는다.
- Spring AOP는 Spring 컨테이너에게 제어받는 Bean에게만 적용이 가능하다.
 
## AspectJ
- AspectJ는 자바언어를 기반으로 완전한 AOP 솔루션을 제공하는 독립적인 라이브러리입니다.
- 바이트코드형태의 생성과 조작을 통해 AOP를 구현하며, Target오브젝트에 명시적인 코드로 부가적인 기능을 직접 넣어주는 방식이다. 컴파일 타임 또는 로드 타임에 AOP 기능을 적용할 수 있는 강력한 AOP 프레임워크. AspectJ는 바이트코드 수준에서 AOP를 적용할 수 있어, 인터페이스뿐만 아니라 클래스 기반의 AOP도 지원한다.
- AspectJ는 자체 언어 확장을 사용하여 AOP를 적용한다. 즉, @Aspect 어노테이션을 사용하여 AOP 로직을 정의하며, AOP를 적용할 시점에 대한 세밀한 제어가 가능하다.
- AspectJ는 바이트코드 수준에서 AOP를 적용하므로, 성능 면에서 더 빠른 실행 속도를 제공한다. AspectJ는 컴파일 타임에 AOP를 적용하여, 런타임에서 프록시 객체를 생성하는 방식이 아니므로, 성능 오버헤드가 적다. 하지만, 컴파일 타임 또는 로드 타임에서 AOP를 적용하는 만큼 설정이 복잡할 수 있다.

### 장점
- 모든 조인포인트를 지원한다.
- AsepctJ Compiler(ajc)를 사용하여 컴파일 하기 때문에 런타임 시에는 아무것도 하지않는다. 런타임 오버헤드가 적다.
- 컴파일 시점, 컴파일 후, 로드시점 위빙의 3가지 방식의 위빙을 사용할 수 있다.
- Spring AOP는 스프링 컨테이너에 있는 빈에게만 사용가능하지만, AspectJ는 모든 오브젝트에 가능하다.

### 단점
- AJC를 사용하여 추가 빌드프로세스가 필요하거나 로드시점의 LTW 위빙을 설정해야한다.
- 컴파일러와 라이브러리를 추가해야한다. 즉 Spring AOP보다 구현방식이 더 어렵고 복잡성이 높다.
- AJC를 사용한 컴파일을 하기때문에 런타임 위빙은 불가능하다.


### 결론
- Spring AOP는 간단한 설정과 사용이 가능하고, Spring 애플리케이션에서 주로 사용된다. 주로 프록시 기반이고, 인터페이스에 대한 AOP를 지원하는 데 비해 성능 상의 제한이 있을 수 있다. AspectJ는 고급 기능과 더 강력한 AOP 기능을 제공한다. 컴파일 타임 또는 로드 타임에 바이트코드를 변환하여 AOP를 적용하고, 클래스 기반과 메서드 외에도 적용할 수 있어 성능이 더 우수하다.


—— 

https://logical-code.tistory.com/118