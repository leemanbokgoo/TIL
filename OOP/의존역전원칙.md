# 의존 역전 원칙 DIP (Dependency Inversion Principle)

![image](https://github.com/user-attachments/assets/d3091453-9c4e-4681-8d66-8965de6c6eef)

- DIP 원칙이란 객체에서 어떤 Class를 참조해서 사용해야하는 상황이 생긴다면, 그 Class를 직접 참조하는 것이 아니라 그 대상의 상위 요소(추상 클래스 or 인터페이스)로 참조하라는 원칙이다.
- 객체들이 서로 정보를 주고 받을 때는 의존 관계가 형성되는데, 이 때 객체들은 나름대로의 원칙을 갖고 정보를 주고 받아야 하는 약속이 있다. 여기서 나름대로의 원칙이란 추상성이 낮은 클래스보다 추상성이 높은 클래스와 통신을 한다는 것을 의미하는데 이것이 DIP 원칙이다.
    - 클래스 간 의존 관계란, 한 클래스가 어떤 기능을 수행하려고 할 때, 다른 클래스의 서비스가 필요한 경우를 말한다.대표적으로 A 클래스의 메소드에서 매개변수를 다른 B 클래스의 타입으로 받아 B 객체의 메서드를 사용할때, A 클래스는 B 클래스와 의존한다고 보면 된다. 
- 다시 말하면 클라이언트(사용자)가 상속 관계로 이루어진 모듈을 가져다 사용할때, 하위 모듈을 직접 인스턴스를 가져다 쓰지 말라는 뜻이다. 왜냐하면 그렇게 할 경우, 하위 모듈의 구체적인 내용에 클라이언트가 의존하게 되어 하위 모듈에 변화가 있을 때마다 클라이언트나 상위 모듈의 코드를 자주 수정해야 되기 때문이다.
- 따라서 한마디로 상위의 인터페이스 타입의 객체로 통신하라는 원칙이다.
- 자신보다 변하기 쉬운 것에 의존하던 것을 추상화된 인터페이스나 상위 클래스를 두어 변하기 쉬운 것의 변화에 영향받지 않게 하는 것이 의존 역전 원칙이다.상위 클래스일수록, 인터페이스일수록, 추상 클래스일수록 변하지 않을 가능성이 높기에 하위 클래스나 구체 클래스가 아닌 상위 클래스, 인터페이스, 추상 클래스를 통해 의존하라는 것이다.
- 그런데 결국 이 말은 추상화를 이용하라는 말과 일맥상통 한 것 같은데, 사실 의존 역전 역칙은 우리가 앞서 배운 개방-폐쇄 원칙과 긴밀한 관계가 있다.
- 의존관계 역전 원칙이란 "추상화에 의존해야지, 구체화에 의존하면 안 된다" 는 원칙이다.

## 의존성 역전 원칙을 적용하지않은 예시
![image](https://github.com/user-attachments/assets/40a9b51d-113e-440e-9613-67a1f85464e9)
- 자동차는 현재 스노우 타이어에 의존하고 있다.
- 스노우 타이어는 계절이 바뀌면 일반 타이어로 교체해야 할 것이다.
    - Car는 SnowTire에 의존하고 있다.
    - 만약, 계절이 바뀌어 스노우 타이어를 일반 타이어로 교체할 경우 자동차는 영향을 받게 된다.
    - 여기서 타이어를 교체한다고 했을 때, Car 클래스에서 수정이 일어난다.
    - Car 클래스에서 구체적인 Tire 클래스를 의존하고 있기 때문이다.
    - 두 클래스 간의 결합도가 높아 유지보수가 어렵다.

## 의존성 역전 원칙을 적용한 예시
![image](https://github.com/user-attachments/assets/ec893623-d8bf-4998-9f23-ac81629fea3f)
- 자동차가 구체적인 타이어들이 아닌 추상화된 타이어 인터페이스에만 의존하게 변경한다. 자동차는 사용하고 있는 타이어를 변경하더라도 자동차는 그 영향을 받지 않는 형태로 구성된다. 또한, 구체적인 타이어 클래스들은 타이어 인터페이스에 의존하게 되었다. 의존 관계의 방향이 역전된 것이다.
    - 구체적인 Tire 클래스(Regular, Snow, Wide)는 Tire 인터페이스를 구현하고 있다.
    - Car 클래스는 인스턴스를 생성할 때 Tire 타입의 객체를 매개변수로 받는다.
    - 타이어를 교체하더라도 Car 클래스에는 어떠한 영향도 가지 않게 되었다.

- 구체적인 Tire 클래스는 변하기 쉬운 반면에, Car 클래스는 변하지 않는 것처럼 의존성 역전 원칙은 자신보다 변하기 쉬운 것에 의존하지 말라는 메시지를 던진다.
- 즉, 상위 클래스일수록, 인터페이스일수록, 추상 클래스일수록 변하지 않을 가능성이 높기에 하위 클래스나 구체 클래스가 아닌 상위 클래스, 인터페이스, 추상 클래스를 통해 의존하라는 것이 바로 의존성 역전 원칙이다.

### 질문
#### 의존 역전 원칙(DIP)을 적용하면 코드의 유지보수성이 어떻게 향상되는가?
- 의존 역전 원칙을 적용하면 구체적인 클래스에 대한 의존성을 줄이고, 추상화된 인터페이스나 상위 클래스에 의존하도록 설계함으로써 클래스 간의 결합도를 낮춥니다. 이는 특정 구현이 변경되더라도 상위 모듈이나 클라이언트에 미치는 영향을 최소화하여 코드의 유지보수성과 확장성을 크게 향상시킵니다.

#### 의존 역전 원칙을 적용하지 않으면 어떤 문제가 발생할 수 있는가?
- 의존 역전 원칙을 적용하지 않으면 구체적인 클래스에 대한 직접적인 의존성으로 인해 두 클래스 간의 결합도가 높아집니다. 이로 인해 한 클래스의 변경이 다른 클래스에 영향을 미치고, 수정 시 수정 범위가 넓어져 유지보수와 확장이 어렵게 됩니다. 예를 들어, Car 클래스가 특정 타이어 구현(SnowTire)에 의존하면, 타이어를 변경할 때마다 Car 클래스도 수정해야 합니다.


--- 

참고링크 

https://ittrue.tistory.com/549

https://inpa.tistory.com/entry/OOP-%F0%9F%92%A0-%EC%95%84%EC%A3%BC-%EC%89%BD%EA%B2%8C-%EC%9D%B4%ED%95%B4%ED%95%98%EB%8A%94-DIP-%EC%9D%98%EC%A1%B4-%EC%97%AD%EC%A0%84-%EC%9B%90%EC%B9%99

https://wikidocs.net/167372