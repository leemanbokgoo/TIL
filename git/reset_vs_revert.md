## rest
- 특정 커밋을 특정 지점까지 하나 이상의 작업트리,인덱스,커밋에 대해 이전 상태로 되돌린다. -soft, -mixed, -hard와 같은 옵션을 사용하여 작업 트리 및 인덱스까지 리셋 여부를 결정한다.
- 로컬에서 아직 공유되지않은 변경사항을 되돌리거나 작업 트리 및 인덱스까지 원하는 지점으로 되돌리고 싶을때 사용된다.
    - 작업 트리 : 현재 내가 보고 수정하고 있는 실제 파일들이 존재하는 디렉토리로 코드 에디터에서 열고 직접 수정하는 공간이 바로 작업 트리다.
    - 인덱스 (Index) 또는 Staging Area :  Git이 다음 커밋에 포함할 파일 목록을 임시로 보관하는 중간 공간이다. git add를 하면 변경 내용을 인덱스에 올려서, 커밋 대상이 된다. 예: git add Main.java → 다음 git commit 시 이 파일이 포함됨.

```
# --soft : 커밋만 되돌린다(작업 트리 및 인덱스는 유지)
git reset --soft <commit-hash>

# mixed : 커밋 및 인덱스를 되돌림(작업 트리는 유지)
git reset --mixed <commit-hash>

# --hard : 커밋, 인덱스, 작업 트리를 모두 되돌림(조심해야 함)
git reset --hard <commit-hash>

```
- git reset을 사용할때는 주의가 필요하며 특히 --hard 옵션을 사용할 경우 작업 트리의 변경사항이 모두 삭제 되므로 신중하게 사용해야한다. 
- 예를 들어, 커밋 A, B, C, D을 push한 후 git reset을 사용한다 가정했을 때
![Image](https://github.com/user-attachments/assets/8e6a3f33-ebd3-47d8-9a94-0c27a4ac0c82)

- 이 때 B 커밋으로 reset --hard를 하게 되면 C, D 커밋은 사라지게 되지만, 원격 저장소에는 C, D가 남아있다. 
![Image](https://github.com/user-attachments/assets/ce0a363c-9a53-42f2-b3b3-520149c0ee15)

- 혼자 사용하는 브랜치라면 push --force 명령어로 원격 저장소에 올릴 수 있지만, 다른 팀원이 있는 경우 충돌이 발생한다. 이럴 때 사용할 수 있는 것이 git revert이다.


## revert
- 이전 커밋을 취소하고 이전 상태로 돌아가면서 새로운 커밋을 생성한다. 즉, 특정 커밋의 변경사항을 되돌리면서 새로운 커밋을 만들어 현재 브랜치에 적용.
- 이미 공유된 브랜치에서 커밋을 취소하고자 할때, 특히 이미 리모트 저장소에 푸시된 상태에서 사용
    - git revert <commit-hash>
- 이전 커밋을 수정하지않고도 새로운 커밋을 생성하므로 기존 커밋 히스토리를 변경하지않는다.
![Image](https://github.com/user-attachments/assets/1573b485-1814-4690-afeb-bcfdb68ca133)
- 되돌릴 커밋이 여러개라면 범위를 주어서 여러개를 선택할 수도 있다.


## revert와 reset의 차이
- git reset과 git revert는 둘 다 이전 커밋으로 되돌리는 데 사용되지만, 목적과 방식이 다르다. git reset은 커밋 히스토리를 수정하는 명령어로, HEAD를 이전 커밋으로 이동시키며, 옵션에 따라 staging 영역이나 작업 디렉토리까지 영향을 줄 수 있다. 특히 --hard 옵션은 커밋과 작업 내용 모두 삭제되기 때문에 복구가 어렵고 협업 시에는 주의가 필요하다. 
- 즉, 둘의 공통점은 '과거로 되돌린다.' 는 것이지만 가장 큰 차이점은 '과거로 되돌리겠다는 내용도 기록되는가?(== commit 이력에 남는가?)' 이다.
- 반면 git revert는 기존 커밋은 그대로 유지하고, 해당 커밋의 반대 작업을 수행하는 새로운 커밋을 생성하여 되돌린다. 따라서 히스토리를 보존하면서 안전하게 취소할 수 있어 협업 상황에서 자주 사용된다.
- 정리하자면, reset은 히스토리를 되돌려 기록을 수정하고, revert는 히스토리를 유지하면서 의도를 취소하는 방식이다.

## revert와 reset의 사용 사례

- 협업프로젝트에서 다른 팀원과 같은 branch를 공유하는 상황일때, 가급적 revert를 사용한다. 협업 프로젝트에서 reset를 실행한다면 충돌이 발생할 수 있다. 원격 저장소의 기존 commit 히스토리에는 날려버린 commit이 존재 할 수 있기 때문이다. (원격저장소에는 해당 커밋이 있지만 로컬저장소에는 해당 커밋이 없다.) 만약 혼자 진행하는 프로젝트라면, 로컬과 원격의 커밋 히스토리가 불일치해도 git push --force 를 이용해 연결할 수 있지만 다수의 개발자가 같은 branch를 공유하는 협업 프로젝트에서 멋대로 커밋 이력을 삭제해버린다면 다른 개발자가 push 할때 충돌이 날 것이다.
- 따라서, 협업 프로젝트에서 이전의 커밋으로 돌아가고 싶을 땐 revert를 사용하는 것이 좋다.

### 질문
#### git reset과 git revert는 모두 커밋을 되돌리는 명령어입니다. 이 둘을 어떤 기준으로 선택해야 할까요?
- git reset과 git revert는 되돌린다는 점에서는 유사하지만 목적과 상황에 따라 선택 기준이 분명히 다릅니다. ågit reset은 커밋 히스토리를 아예 바꾸기 때문에 로컬에서만 작업할 때나 아직 push하지 않은 커밋을 정리할 때 사용합니다. 예를 들어 실수로 커밋한 내용을 지우고 다시 정리하고 싶을 때 유용합니다.
- 반면, git revert는 커밋 히스토리를 보존한 채로 되돌리는 새로운 커밋을 생성하기 때문에 협업 중인 브랜치에서는 더 안전합니다. 이미 공유된 커밋을 reset하면 다른 사람의 작업에 영향을 줄 수 있기 때문입니다.
- 즉, 로컬 정리 = reset, 협업 상황 = revert로 기억하고 사용합니다.

#### git reset --soft, --mixed, --hard의 차이를 실제 상황 예시와 함께 설명해 주세요.
- 이 세 가지는 git reset 명령어에서 커밋 외에 인덱스(staging area)와 작업 디렉토리(working directory)에 얼마나 영향을 줄지를 선택하는 옵션입니다.
- --soft는 커밋만 되돌리고, 인덱스와 작업 디렉토리는 유지됩니다. 예를 들어 최근 커밋을 지우고 변경 내용은 유지한 채로 커밋을 다시 만들고 싶을 때 사용합니다.
- --mixed는 커밋과 인덱스를 되돌리고, 작업 디렉토리는 유지합니다. 즉, 커밋과 staging 정보는 사라지지만 파일은 그대로 남아서 다시 add할 수 있습니다.
- --hard는 커밋, 인덱스, 작업 디렉토리 모두 되돌립니다. 코드 변경사항 자체도 사라지기 때문에 복구가 어려워 주의가 필요합니다.
- 실무에서는 실수로 커밋만 했을 때 --soft, staging을 초기화하고 싶을 땐 --mixed, 작업 전체를 날리고 싶을 땐 --hard를 사용합니다. 특히 --hard는 팀 작업 시 거의 사용하지 않습니다.

---

참고링크 

https://doheelab.github.io/github/gitReset/

https://velog.io/@njs04210/Git-reset%EA%B3%BC-revert-%EC%95%8C%EA%B3%A0-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0