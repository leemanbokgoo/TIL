## Lettuce
- Lettuce는 비동기, 동기, 반응형 API를 제공하는 고성능 Redis 클라이언트이다. 내부적으로 non-blocking, 비동기 방식으로 구현되어 있어 높은 성능과 유연성을 제공한다.
- Lettuce는 비동기, non-blocking 방식으로 단일 커넥션으로 멀티 스레드 요청을 처리할 수 있다.  Lettuce는 스레드 세이프하며 netty 기반으로 비동기 Non-blocking으로 동작한다.
- 동일한 TPS로 작동할 때, Lettuce는 상대적으로 적은 수의 커넥션을 유지한다.비동기 처리 덕분에 응답 시간이 짧다. 높은 TPS에서도 응답 시간이 크게 증가하지 않는다.

## Lettuce 주요 특징
### Non-blocking, 비동기 처리
- Lettuce는 Netty를 기반으로 하여 non-blocking 방식으로 작동한다. 이는 높은 동시성 처리를 가능하게 하며, 시스템 리소스를 효율적으로 사용한다.
- 비동기 처리를 통해 I/O 작업이 완료될 때까지 기다리지 않고, 다른 작업을 수행할 수 있다. 이를 통해 응답 시간을 단축시키고 처리량을 증가시킨다.

### 멀티 스레드 요청 처리
- Lettuce는 단일 커넥션으로도 멀티 스레드 요청을 처리할 수 있다. 이는 커넥션 수를 최소화하면서도 높은 성능을 유지할 수 있게 한다.
- Netty의 이벤트 루프를 활용하여 여러 스레드에서 들어오는 요청을 효율적으로 관리한다.

### 적은 커넥션 유지
- Jedis에 비해 Lettuce는 커넥션을 많이 유지하지 않는다. 이는 커넥션 풀이 필요하지 않음을 의미하며, 리소스 사용을 최적화한다.
- Lettuce는 커넥션 관리를 자동으로 처리하여 개발자가 커넥션 풀을 직접 관리할 필요가 없다.

## Lettuce 사용의 장점
### 높은 성능
- 비동기, non-blocking 방식으로 인해 Lettuce는 높은 처리량과 짧은 응답 시간을 제공한다. 이는 특히 고부하 시스템에서 중요한 장점이다.

### 유연한 API
- Lettuce는 비동기, 동기, 반응형 API를 모두 제공하여 다양한 요구사항을 충족할 수 있다. 개발자는 필요에 따라 적절한 API를 선택하여 사용할 수 있다.

### 간단한 커넥션 관리
- 커넥션 풀 없이도 효율적으로 작동하며, 자동으로 커넥션을 관리하므로 개발자의 부담을 줄인다.

## Jedis
- Jedis는 성능과 사용의 용이성을 위해 설계된 Redis 내부의 클라이언트 라이브러리이다. 다른 Redis 자바 클라이언트에 비해 기능이 적지만, 많은 양의 메모리를 처리할 수 있다. 더 간단한 기능을 가지고 있어 사용하기 쉽지만, 클러스터와는 동기적으로만 작동한다. Jedis를 선택하면 데이터 저장 메커니즘보다 애플리케이션과 데이터에 더 집중하기 쉽다.
- Jedis는 동기식 API를 제공하는 Redis 클라이언트로, 단순하고 사용하기 쉽다. 그러나 Lettuce에 비해 몇 가지 단점이 있다.
- Jedis는 동기식 방식으로 각 스레드가 별도의 커넥션을 사용한다.
- 동일한 TPS로 작동할 때, Jedis는 상대적으로 많은 수의 커넥션을 유지해야 한다.
- 동기식 처리로 인해 TPS가 증가함에 따라 응답 시간이 길어진다. 높은 TPS에서는 블로킹 현상이 발생할 수 있다.

## Jedis 특징
### 동기식 처리
- Jedis는 기본적으로 동기식으로 작동하므로, I/O 작업이 완료될 때까지 스레드가 블록된다. 이는 높은 동시성 환경에서 성능 저하를 초래할 수 있다.
- 비동기 처리가 필요한 경우, 추가적인 설정과 복잡한 코딩이 필요하다.

### 멀티 스레드 환경에서의 제한
- Jedis는 스레드 세이프하지 않다. Jedis는 멀티 스레드 환경에서 사용할 경우, 각 스레드마다 별도의 커넥션을 사용해야 한다. 이는 커넥션 수가 증가하게 만들며, 리소스 낭비를 초래할 수 있다.
- 커넥션 풀이 필요하며, 이를 관리하기 위한 추가적인 설정이 필요하다.

### 커넥션 관리
- Jedis는 커넥션 풀을 사용하여 여러 커넥션을 관리한다. 이는 많은 수의 커넥션을 유지하게 되어 메모리 사용량이 증가할 수 있다.
- Lettuce는 단일 커넥션으로도 멀티 스레드 요청을 처리할 수 있어, 커넥션 관리가 단순하며 효율적이다.

## Lettuce VS Jedis
- 성능 : Lettuce는 동기와 비동기 통신 모두를 지원하지만, Jedis는 동기식 통신만 지원한다. 따라서 대량의 요청과 응답 처리에 있어서, Lettuce가 더욱 유리하다. TPS, CPU, 
- Connection 수, 응답속도 등 모든 면에서 Lettuce가 우위에 있다.
- thread safe : Lettuce는 thread safe 하기 때문에, 멀티 쓰레드 환경에서 단일 Lettuce 인스턴스를 사용해도 문제없다. 하지만 Jedis는 thread safe 하지 않기 때문에, 여러 쓰레드 간에 단일 Jedis 인스턴스를 공유하지 말아야 한다. 
    - Jedis를 멀티 쓰레드 환경에서 사용하려면 커넥션 풀을 사용해야 한다. 하지만 1) 레디스 자체의 커넥션 수에 제한이 걸리거나 2) 합리적인 커넥션 수를 초과하지 않기 위해, 커넥션 수를 제한해야 하는 상황이 있다는 점을 유의해야 한다.
- 즉, 성능과 쓰레드 안정성의 측면을 고려하면 Lettuce가 더 나은 선택이다.

----

참고링크 

https://100100e.tistory.com/554

https://namuhuchutong.tistory.com/8

https://devforme.tistory.com/46