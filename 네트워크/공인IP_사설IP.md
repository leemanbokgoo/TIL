![image](https://github.com/user-attachments/assets/855435a2-2f3b-4ab8-8031-9d387bb6b1ae)

## IP
- 인터넷에 연결되어있는 모든 장치들(컴퓨터,서버장비,스마트폰 등)을 식벽할 수 있도록 각각의 장비에게 부여되는 고유 주소이다.
- 우리가 다른사람에게 우편물을 보낼때, 국가, 지역, 아파트, 동호수 를 정확히 기재하여 발송하듯이, 네트워크 데이터가 우리에게 도달해 나무위키 같은 홈페이지를 띄우기 위해서는 정확한 주소 정보가 필요하다. 
- 그것이 흔히 말하는 인터넷 주소 IP 이다. IP주소는 IPv4, IPv6 2가지 종류가 있다. 단 일반적으로 IP 주소라 하면 IPv4 주소를 말한다고 보면된다.

## IP의 종류
#### 고정 IP
- 고정 IP는 말 그대로 변하지 않고 컴퓨터에 고정적으로 부여된 IP이다.
- 한번 부여되면 IP 반납을 하기 전까지는 다른 장비에 부여할 수 없는 고유의 IP로 보안성이 우수하기 때문에 보안이 필요한 업체나 기관에서 사용한다.
#### 유동 IP
- 유동 IP 역시 말그대로 변하는 IP이다.
- 인터넷 사용자 모두에게 고정 IP를 부여해 주기는 힘들기 때문에, 일정한 주기 또는 사용자들이 인터넷에 접속하는 매 순간마다 사용하고 있지 않은 IP 주소를 임시로 발급해 주는 IP이다.
대부분의 사용자는 유동 IP를 사용한다.
​
#### 공인 IP
- IP 주소는 임의로 우리가 부여하는 것이 아니라 전 세계적으로 ICANN이라는 기관이 국가별로 사용할 IP 대역을 관리하고, 우리나라는 한국인터넷진흥원(KISA)에서 국내 IP 주소들을 관리하고 있다.
- 이것을 ISP(Internet Service Provider의 약자로 KT, LG, SKT와 같이 인터넷을 제공하는 통신업체)가 부여받고, 우리는 위 회사에 가입을 통해 IP를 제공받아 인터넷을 사용하게 되는 것이다. 이렇게 발급받은 IP를 공인 IP라고 한다.
 
#### 사설 IP
- 공유기를 사용한 인터넷 접속 환경일 경우 공유기까지는 공인 IP 할당을 하지만, 공유기에 연결되어 있는 가정이나 회사의 각 네트워크 기기에는 사설 IP를 할당한다.
- 즉, 사설 IP는 어떤 네트워크 안에서만 내부적으로 사용되는 고유한 주소이다. 사설 IP는 보통 내 컴퓨터에서 사용하는 로컬 IP라고도 불리운다.
- 공인 IP는 전 세계에서 유일하지만, 사설 IP는 하나의 네트워크 안에서 유일하다. 공인 IP는 외부, 내부 상관없이 해당 IP에 접속할 수 있으나, 사설 IP는 내부에서만 접근이 가능하다.

![image](https://github.com/user-attachments/assets/f888836a-4f36-4c32-b5b9-b3653999854d)


## 공인 IP (Public IP)
- 인터넷 사용자의 로컬 네트워크를 식별하기 위해 ISP(인터넷 서비스 공급자)가 제공하는 IP 주소이다. 공용 IP 주소라고도 불리며 외부에 공개되어 있는 IP 주소이다.
- 공인 IP는 전세계에서 유일한 IP 주소를 갖는다.
- 공인 IP 주소가 외부에 공개되어 있기에 인터넷에 연결된 다른 PC로부터의 접근이 가능하다. 따라서 공인 IP 주소를 사용하는 경우에는 방화벽 등의 보안 프로그램을 설치할 필요가 있다.

## 사설 IP (private IP)
- 일반 가정이나 회사 내 등에 할당된 네트워크의 IP 주소이며, 로컬 IP, 가상 IP라고도 한다. IPv4의 주소부족으로 인해 서브넷팅된 IP이기 때문에 라우터에 의해 로컬 네트워크상의 PC 나 장치에 할당된다.
- 사설IP 주소는 다음 3가지 주소대역으로 고정된다.
    - Class A : 10.0.0.0 ~ 10.255.255.255
    - Class B : 172.16.0.0 ~ 172.31.255.255
    - Class C : 192.168.0.0 ~ 192.168.255.255
-  사설 IP 주소만으로는 인터넷에 직접 연결할 수 없다. 라우터를 통해 1개의 공인(Public) IP만 할당하고, 라우터에 연결된 개인 PC는 사설(Private) IP를 각각 할당 받아 인터넷에 접속할 수 있게 된다.

- 컴퓨터 -> 인터넷 : 사설 IP를 할당받은 스마트폰 혹은 개인 PC가 데이터 패킷을 인터넷으로 전송하면, 라우터(공유기)가 해당 사설 IP를 공인 IP로 바꿔서 전송한다.
- 인터넷 -> 컴퓨터 : 인터넷에서 오는 데이터 패킷의 목적지도 해당하는 사설 IP로 변경한 후 개인 스마트폰 혹은 PC에 전송한다.

![image](https://github.com/user-attachments/assets/c9d32dc8-ab37-4e3e-8a9c-7189c3df6375)

## 사설 IP & 사설망 원리
-  사설망이란 공유기를 사용한 인터넷 접속 환경일 경우 공유기까지는 공인 IP 할당을 하지만, 공유기에 연결되어 있는 가정이나 회사의 각 네트워크 기기에는 사설 IP를 할당하여 그룹으로 묶는 방법이다.
 - 쉽게 비유하자면, 일종의 반장을 뽑는 것과 같다. 학교의 회의에 참여하는데 모든사람이 참여할수 없으니 대표 주자인 반장이란걸 뽑는다. 그리고 그 반장은 대표로 나가서 학생들의 의견을 대신 전달하며, 학교 회의 내용을 다시 학생들에게 전달한다. 여기서 반장이 게이트웨이(Gateway)로 비유할수 있으며, 반을 사설망, 학생들은 각 전자기기들, 학교를 인터넷으로 비유하면 딱 들어 맞게 된다.
    - 게이트웨이는 ‘관문’이나 ‘출입구’라는 의미로 다양한 분야에서 일반적으로 사용되는 용어 이다.컴퓨터 네트워크에서의 게이트웨이는 현재 사용자가 위치한 네트워크에서 다른 네트워크로 이동하기 위해 반드시 거쳐야 하는 거점을 의미한다.
- 사설망 (Private Network)는 지정된 대역의 아이피만 사용이 가능하다. 리눅스하면서 한번쯤은 봤던 10.0.0.0 번대의 아이피와, 톰캣이나 아파치 서버를 설치하면서 한번쯤은 봤던 192.168.0.0 번대의 아이피가 바로 사설IP를 일컫는다.
- 앞으로 아래의 표에 나타난 숫자의 아이피가 있으면 그 아이피는 어느 특정 국가의 지역을 나타내는 인터넷 주소가 아닌 사설 인터넷 주소라고 생각하면 된다

![image](https://github.com/user-attachments/assets/c6c03774-f67c-4df5-af34-9de5d497ab84)
- 사설망을 그림으로 표현해 보면 위와 같이 표현 된다. 그리고 방금 비유했던 반장 개념을 접목해보면 다음과 같이 된다.
    - 반 : 사설망
    - 반장 : Gateway (192.168.0.1 ↔ 181.227.3.33)
    - 반 학생들 : 각 컴퓨터들 (192.168.0.2, 192.168.0.3, 192.168.0.4 ...)
    - 학교 : 외부 인터넷 (61.123.44.1)

- 사설망(반) 안에서 학생(컴퓨터)들은 유니크 하다. 학창시절을 떠올려보면, 반마다 학생번호를 부여하는데 2학년 1반의 10번 학생과 2학년 2반의 10번 학생은 서로 전혀 다른 사람이다. 보기에는 부여받은 10번은 같지만 2학년 1반, 2반을 통해 10번을 구분할 수 있다. 이 개념이 바로 사설망 개념이다.
- 사설 IP(로컬 IP)는 어떤 네트워크 안에서 내부적으로 사용되는 고유한 주소이다. 따라서 건국대학교 안에서 사용하는 192.168.10.2 아이피와 숭실대학교 안에서 사용하는 192.168.10.- 2 아이피는 번호는 같을지언정 전혀 다른 목적지 주소를 나타내게 된다. 그리고 같은 번호 아이피를 구분하는 수단은 2학년 1반 처럼 외부에서 할당받은 전 세계에서 유일한 공인IP(181.277.3.33)로 구분한다.
- 이처럼 사설망이라는 개념을 쓰면 같은 아이피 번호를 중복해서 마구 사용할수 있고, 이는 곧 IP의 절약과 연관된다.

### NAT (사설망 ↔ 외부 통신 방법)
- IP를 절약하는 트릭에 대해 이제 이해가 되었다. 그러면 사설망안에 있는 컴퓨터는 어떻게 외부와 통신 할까?
- 외부 인터넷 입장에서 주소 번호가 똑같은 사설 IP들을 어떻게 각각을 특정해 정확히 찾아들어가 우리에게 웹페이지를 띄울 수 있는 것일까?
- 여기서 바로 NAT(Network Adress Translation)이란 개념이 등장한다. 단어가 생소해서 무서울 필요가 없다. 이름에서 알수있듯이 인터넷 주소 번역 기능이다.
- 인터넷 주소 번역 원리는 간단하다. 우선 공유기(라우터)에 연결되어있는 각 사내 컴퓨터들의 사설 IP (192.168.0.xxx)를 받아와 유일한 공인 IP로 변환한다. 그리고 외부 인터넷으로 공인 IP 주소정보를 보내는 것이다.
- 외부 입장에서는 어느 회사의 영업부 사원이 보냈는지 알지 못한다. 그냥 회사 공유기 주소만 알고있는 것이다. 하지만 문제는 없다. 답변을 하게되면, 인터넷 정보가 다시 회사 공유기로 올것이고 -공유기에서는 이전에 요청한 정보들을 다 기억하고 있어서, 확인하고 그대로 김인턴 PC에게 넘겨주는 것이다.
- 즉, private ip 를 사용하고 있는 컴퓨터가 사설 바깥쪽에 있는 public ip에 해당되는 외부세계에 간접적이라도 접속할 수 있게 된다. 이때 사용되는 기술이 바로 NAT 인 것이다.
    - https://inpa.tistory.com/entry/WEB-%F0%9F%8C%90-NAT-%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80

### 질문
#### 공인 IP와 사설 IP는 각각 어떤 역할을 하며, 주요 차이점은 무엇인가요?
- 공인 IP는 인터넷 서비스 제공업체(ISP)로부터 할당받아 외부 네트워크에서 고유하게 식별될 수 있는 주소입니다. 전 세계적으로 유일하며, 외부 인터넷과 직접 연결되어 다른 기기와 통신이 가능합니다. 반면, 사설 IP는 로컬 네트워크 내부에서만 사용되는 주소로, 네트워크 내에서 유일성을 가집니다. 사설 IP는 외부와 직접 통신할 수 없으며, NAT(Network Address Translation) 기술을 통해 공인 IP로 변환하여 외부 인터넷에 연결됩니다. 주요 차이점은 공인 IP는 외부 접근이 가능하고 전 세계적으로 고유한 반면, 사설 IP는 내부 네트워크에서만 사용되며 중복될 수 있다는 점입니다.


#### NAT(Network Address Translation)는 어떻게 사설 IP와 공인 IP 간의 통신을 가능하게 하나요?
- NAT는 사설 네트워크 내부의 사설 IP 주소를 공인 IP 주소로 변환하여 외부 네트워크와 통신을 가능하게 합니다. 내부에서 발생한 요청을 NAT 장치(예: 공유기)가 공인 IP로 변환한 뒤 외부로 전송하며, 외부 네트워크에서 수신한 응답 데이터는 다시 사설 IP로 변환하여 내부 네트워크로 전달합니다. NAT는 요청 시 내부 IP와 포트를 매핑해 저장하기 때문에, 다수의 내부 기기들이 동일한 공인 IP를 공유하면서도 개별 통신을 유지할 수 있습니다. 이 방식은 IP 주소 절약과 네트워크 보안 측면에서 유리합니다.

--- 

출처 링크

https://velog.io/@hidaehyunlee/%EA%B3%B5%EC%9D%B8Public-%EC%82%AC%EC%84%A4Private-IP%EC%9D%98-%EC%B0%A8%EC%9D%B4%EC%A0%90

https://inpa.tistory.com/entry/WEB-%F0%9F%8C%90-IP-%EA%B8%B0%EC%B4%88-%EC%82%AC%EC%84%A4IP-%EA%B3%B5%EC%9D%B8IP-NAT-%EA%B0%9C%EB%85%90-%EC%A0%95%EB%A7%90-%EC%89%BD%EA%B2%8C-%EC%A0%95%EB%A6%AC