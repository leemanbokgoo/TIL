
# TCP와 UDP 

## TCP (Transmission Control Protocol)
![image](https://github.com/user-attachments/assets/a4dd0a2e-123b-4d50-a0c7-dcdd72780393)
- TCP를 해석하면 전송을 제어하는 프로토콜 (규약)이라는 뜻으로 인터넷상에서 데이터를 메세지 형태로 보내기위해 IP와 함께 사용하는 프로토ㅗㄹ이다
- 일반적으로 TCP와 IP를 함께 사용하는데 IP가 데이터의 배달을 처리한다면 TCP는 **패킷을 추척 및 관리**하게 됩니다. TCP는 연결형 서비스를 지원하는 프로토콜로 인터넷 환경에서 기본으로 사용합니다. 
- TCP가 연결 지향방식이라는 것은 패킷을 전송하기위한 논리적 경로를 배정한다는 말.
- 3-way handshaking 과정은 목적지와 수신지를 확실히 하여 정확한 전송을 보장하기위해서 세션을 수립하는 과정을 의미.
- **연결형 서비스로 신뢰성을 보장하기때문** -> 그러므로 UDP보다 속도가 느림.(이러한 기능은 CPU 사용 -> 속도에 영향을 줌)
- TCP는 연속성보다 신뢰성있는 전송이 중요할떄 사용하는 프로토콜로 예를 들면 파일 전송과 같은 경우에 사용됨.

### 특징
- 연결 지향 방식으로 패킷 교환 방식을 사용한다.
- 3way handshaking 과정을 통해 연결을 설정하고 4-way handshaking을 통해 해제한다.
- 흐름 제어 및 혼잡 제어
- 높은 신뢰성 보장
- UDP보다 속도가 느리다
- 전이중(Full-Duplex), 점대점 (point to Point)방식


## UDP (User Datagram Protocol)
![image](https://github.com/user-attachments/assets/e1e5e89c-1479-4e80-9683-520addbc38dd)

- 데이터를 데이터 그램 단위로 처리하는 프로토콜. 여기서 데이터 그램은 독립적인 관계를 지니는 패킷
- 비연결형 프로토콜, 즉 연결을 위해 할당되는 논리적 경로가 없는데 그렇기때문에 각각의 패킷은 다른 경로로 전송되고 각각의 패킷은 독립적인 관계를 지니게 되는데 이렇게 데이터를 서로 다른 경로로 독립적으로 처리하게 되고 이러한 프로토콜을 UDP라고 함
- 비연결형 서비스이기때문에 연결을 설정하고 해제하는 과정이 존재하지않음. 패킷에 순서를 부여하여 조립하거나 흐름제어 또는 혼잡제어 같은 기능도 처리하지않음  -> TCP보다 속도가 빠르며 네트워크 부하가 적다.그러나 신뢰성 있는 데이터의 전송을 보장하지못함
- **신뢰성보다는 연속성이 중요한 서비스** 실시간 스트리밍 같은 서비스에 자주 사용됨.

### 특징
- 비연결형 서비스로 데이터 그램 방식을 제공
- 정보를 주고 받을 때 정보를 보내거나 받는 다는 신호절차를 거치지않는다
- UDP헤더의 CheckSum 필드를 통해 최소한의 오류만 검출한다.
- 신뢰성이 낮다
- TCP보다 속도가 빠르다 

#### UDP서버의 특징
- UDP에는 연결 자체가 없어서(connect 함수 불필요) 서버 소켓과 클라이언트 소켓의 구분이 없다. 
- 소켓을 활용해 IP와 Port 기반으로 데이터를 전송한다.
- 서버와 클라이언트는 1대1, 1대 N, N대 N 등으로 연결 될 수있다.
- 데이터 그램(메세지)단위로 전송되며 그 크기는 65535바이트로 크기가 초과되면 잘라서 보낸다
- 흐름제어가 없어서 패킷이 제대로 전송되었는ㄴ지 오류가 없는지 확인할 수 없다.
- 파일 전송과 같은 신뢰성이 필요한 서비스보다 성능이 중요시 되는 경우에 사용.




## 질문 

### 패킷이란?
- 인터넷 내에서 데이터를 보내기위한 경로배정(라우팅)을 효율적으로 하기위해서 데이터를 여러개의 조각들로 나누어 전송함 -> 이 데이터 조각이 패킷

### TCP는 패킷을 어떻게 추적 관리하나요?
- 데이터는 패킷단위로 나누어 같은 목적지(IP계층)으로 전송됩니다. 예를들어 a,b,c 패킷이 목적지로 간다고 할떄 데이터가 순차적으로 가는 지 확인하기위해서 패킷에 1,2,3이라는 번호를 부여하여 패킷분실확인과 같은 처리를 하고 목적지에서 재조립합니다. 이런방식으로 TCP는 패킷을 추적하며 나눠서 보내진 데이터를 받고 조립합니다. 

### TCP 통신에서 발생할 수 있는 문제와 이를 해결하기 위한 방법은 무엇인가요?
- TCP 통신에서 발생할 수 있는 문제로는 패킷 손실, 지연, 네트워크 혼잡, 그리고 연결 끊김 등이 있으며, 각각을 해결하기 위해 다양한 메커니즘이 사용됩니다.
- 패킷 손실은 네트워크 혼잡이나 불안정으로 인해 일부 패킷이 도착하지 않는 경우로, TCP는 손실된 패킷을 감지하고 이를 자동으로 재전송하여 데이터의 완전성을 보장합니다. 패킷 지연의 경우 네트워크 경로에서 패킷이 늦게 도착할 수 있는데, TCP는 순서 번호를 부여하여 수신 측에서 패킷을 올바른 순서대로 정렬하고 처리할 수 있도록 합니다.
- 네트워크 혼잡은 많은 클라이언트가 동시에 데이터를 전송할 때 발생할 수 있으며, 이를 해결하기 위해 TCP는 슬로우 스타트(Slow Start)와 혼잡 회피(Congestion Avoidance) 알고리즘을 통해 전송 속도를 조절하여 네트워크의 과부하를 방지합니다. 마지막으로 연결이 예기치 않게 끊기는 경우가 발생할 수 있는데, TCP는 keep-alive 패킷을 통해 연결 상태를 주기적으로 확인하여 연결이 지속적으로 유지되도록 보장합니다.

### TCP 3핸드세이킹 과정에서 소켓의 상태 변화와 포트의 연관성을 설명해 주세요.
- TCP 3핸드셰이킹 과정에서 소켓의 상태 변화와 포트는 연결 설정을 위한 중요한 역할을 합니다. 먼저 클라이언트는 서버에 연결을 요청하며 SYN 패킷을 보내고, 이때 클라이언트 소켓은 SYN-SENT 상태가 됩니다. 서버는 클라이언트의 요청을 수신하고, 연결을 허가한다는 SYN-ACK 패킷을 보내며 SYN-RECEIVED 상태로 전환합니다. 클라이언트가 이에 대해 ACK 패킷으로 응답하면 소켓은 ESTABLISHED 상태로 전환되며, 양쪽 소켓은 모두 연결된 상태가 됩니다.
- 이 과정에서 클라이언트와 서버는 서로의 IP 주소와 포트 번호를 확인하여 소켓을 고유하게 식별하며, 동일한 IP에서 여러 연결을 관리할 수 있도록 클라이언트의 임시 포트가 동적으로 할당됩니다.

### TCP와 UDP를 혼합하여 사용하는 경우, 어떤 기준으로 프로토콜을 선택하나요?
- TCP와 UDP를 혼합하여 사용하는 경우, 주로 데이터의 신뢰성과 전송 속도 요구에 따라 프로토콜을 선택합니다. 신뢰성이 중요한 경우에는 TCP를 사용합니다. TCP는 패킷 손실 시 자동 재전송, 패킷 순서 보장, 흐름 제어, 혼잡 제어 기능을 제공하여 데이터의 정확한 전달을 보장하므로, 파일 전송, 데이터베이스 통신, HTTP 요청처럼 정확한 데이터 전달이 필수적인 경우에 적합합니다. 반면, 낮은 지연이 필요한 경우 UDP를 선택합니다. UDP는 데이터 전송 속도가 빠르고 오버헤드가 적으므로 실시간 스트리밍, 온라인 게임, 화상 회의처럼 전송 속도와 지연이 중요한 경우에 적합합니다. 이 경우, 데이터 손실이 발생해도 서비스의 전체 성능에 크게 영향을 미치지 않으며, 애플리케이션이 손실을 보완하는 방식으로 설계됩니다. 

### TCP/IP 커넥션의 원리와 중요성은 무엇인가요?
- TCP/IP 커넥션은 인터넷을 통한 데이터 전송을 위해 신뢰성 있고 순서가 보장된 연결을 설정하는 원리로, 3핸드셰이킹을 통해 연결을 수립하고 이후 데이터 전송 및 수신을 확인하여 안정성을 보장합니다. 이러한 TCP/IP 커넥션은 데이터가 손실되지 않고 정확한 순서로 도달하도록 하여 웹 통신, 파일 전송, 이메일 등 다양한 인터넷 기반 서비스의 신뢰성과 안정성을 확보하는 데 있어 매우 중요합니다.


참고 링크 
https://mangkyu.tistory.com/15