# Restful API Hateoas
## HATEOAS (Hypermedia As The Engine Of Application State)
- **HATEOAS (Hypermedia as the Engine of Application State)**는 RESTful API 설계의 중요한 원칙 중 하나로, 클라이언트가 애플리케이션의 상태 전이를 하이퍼미디어를 통해 탐색하도록 돕는 개념이다. 이를 통해 API가 더 자율적이고 확장 가능한 구조를 갖출 수 있다. 서버가 클라이언트에게 하이퍼 미디어를 통해 정보를 동적으로 제공해주는 것을 말한다.
- API에서 리소스에 대해 어떠한 행동을 할 수 있는지 URL을 전달하여 클라이언트가 참고하고 사용할 수 있도록 한다. 이때, 해당 리소스의 상태에 따라 링크 정보가 바뀌며 동적으로 리소스를 구성함.
- 예를 들어 예약의 상태에 따라 시술완료가 가능하면 시술완료 처리를 할 수 있는 링크를 포함해 응답을 전달한다. 이러한 메세지를 표현하기위해 헤더의 CententType을 application/hal+json으로 전달하면 클라이언트에서는 _links 필드에 링크 정보가 있다고 예상 할 수 있다.

- 애플리케이션의 상태는 Hyperlink를 이용해 전이되어야한다는 뜻. 이러한 방법으로는 클라이언트가 서버로부터 특정 요청을 할떄 요청에 필요한 URI를 응답에 포함시켜 반환하는 것으로 가능 하게 할 수 있다. 
- 접근 가능한 추가 API들이 links라는 이름으로 제공된다. 즉, 조회(GET)하는 요청 이후, 이를 조회, 수정, 삭제할 때 이러한 동작을 URI를 이용해 동적으로 알려준다는 의미이다. 각 기능마다 URI를 링크시킴으로써, 동적인 API 제공이 가능하도록 한다.
- HATEOAS는 클라이언트와 서버 간의 결합도를 낮추고, API 사용성을 높인다. 왜냐하면 HATEOAS를 통해 클라이언트는 서버의 상태를 동적으로 탐색할 수 있기 떄문.
- HATEOAS는 RESTful API의 상위 레벨 구현을 의미. 이는 클라이언트가 서버의 상태를 동적으로 탐색할 수 있도록 하여, 클라이언트와 서버 간의 결합도를 낮추는 데 큰 도움이 된다.

## HATEOAS의 핵심 개념
- HATEOAS는 REST(Representational State Transfer) 아키텍처의 하위 개념으로, 클라이언트가 서버와의 상호작용을 위해 필요한 정보를 응답에 포함된 하이퍼미디어 링크를 통해 제공받는 방식
#### REST와 HATEOAS의 관계
- RESTful API 설계에서 클라이언트와 서버는 상태를 명시적으로 주고받는다.
-  HATEOAS는 리소스의 현재 상태와 가능한 다음 상태 전이를 하이퍼미디어 형식으로 포함시킴으로써 클라이언트가 서버의 문서를 몰라도 작동할 수 있게 한다.

#### HATEOAS의 주요 구성 요소
- 리소스: API에서 관리하는 모든 데이터 단위를 의미합니다. (예: user, order, product 등)
- 링크: 리소스의 상태와 관련된 다른 리소스나 가능한 액션에 대한 URL을 포함합니다.
    - 예: self, next, previous, edit, delete, add 등
- 하이퍼미디어 형식: JSON, XML, HAL(Hypertext Application Language), Siren 등 다양한 형식으로 링크를 포함할 수 있습니다.

### HATEOAS의 동작 방식
- 서버는 리소스에 대한 정보를 반환하면서 해당 리소스와 관련된 가능한 작업이나 상태 전이에 대한 링크를 제공한다. 클라이언트는 이 링크를 사용해 다음 작업을 수행할 수 있다.
#### 예시: JSON 기반의 HATEOAS
```
{
  "id": 1,
  "name": "John Doe",
  "email": "john.doe@example.com",
  "_links": {
    "self": {
      "href": "/users/1"
    },
    "update": {
      "href": "/users/1",
      "method": "PUT"
    },
    "delete": {
      "href": "/users/1",
      "method": "DELETE"
    }
  }
}
```
    - self: 현재 리소스를 참조하는 URL
    - update: 사용자 정보 업데이트 링크
     -delete: 사용자 삭제 링크
- 클라이언트 동작: 클라이언트는 응답에서 제공된 링크를 읽고 다음 동작을 결정합니다. 예를 들어, update 링크를 사용해 사용자 정보를 업데이트할 수 있습니다.

## 장점
#### 셀프 디스커버리 
- 클라이언트는 서버의 링크를 따라가면서 가능한 작업을 알아낼 수 있다.
- 서버의 문서화가 줄어들고 클라이언트 변경 시 종속성이 낮아짐.
#### 유연성
- API 구조 변경이 서버와 클라이언트 간의 독립성을 유지하며 이루어질 수 있다.
- 클라이언트는 URI 구조를 사전에 알 필요가 없다.
#### 확장 가능성
- API의 새로운 기능을 하이퍼 미디어 ㄹ이크로 추가할 수 있으므로 점직적인 확장이 가능

## 단점
#### 복잡성
- HATEOAS를 구현하려면 응답에 추가적인 하이퍼미디어 링크를 포함해야 하므로 설계 및 개발이 복잡해질 수 있다.
#### 표준화 부족
- 하이퍼미디어를 표현하는 방식이 표준화되어 있지 않으므로, JSON, XML, HAL 등 다양한 형식 간의 선택이 필요
### 오버헤드
- 하이퍼미디어 링크가 포함된 응답은 크기가 커질 수 있어 성능에 영향을 줄 수 있습니다.

## HATEOAS가 필요한 경우
- 클라이언트가 동적으로 서버와 상호작용해야 하는 경우.
- API가 자주 변경되거나 확장될 가능성이 높은 경우.
- 클라이언트가 서버의 URI 구조나 동작에 의존하지 않도록 해야 하는 경우.

## HATEOAS가 불필요한 경우
- API가 단순하고 URI 구조가 고정적이며, 클라이언트와 서버가 밀접하게 결합되어 있는 경우.
- 하이퍼미디어의 오버헤드가 성능에 치명적인 영향을 줄 수 있는 경우.

HATEOAS는 RESTful API를 더 강력하고 확장 가능하게 만들어주는 중요한 개념이지만, 모든 프로젝트에 필요하지는 않다. 프로젝트의 복잡성, 확장성 요구사항, 클라이언트-서버 관계를 고려해 도입 여부를 결정하는 것이 중요함.

---

참고링크 

https://f-lab.kr/insight/hateoas-restful-api

https://brunch.co.kr/@purpledev/29

https://joomn11.tistory.com/26